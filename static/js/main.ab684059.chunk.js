(this["webpackJsonphabit-tracker"]=this["webpackJsonphabit-tracker"]||[]).push([[0],{180:function(e,t,n){},230:function(e,t,n){},236:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(19),i=n.n(c),s=(n(180),n(15)),o=n(24),u=n(20),b=n(282),l=n(147),d=n.n(l),j=n(146),h=n.n(j),p=n(237),O=n(297),f=n(301),x=n(280),v=n(276),m=n(275),y=n(28),w="SET",g="RESET",k=function(e,t){return t.type===w?Object(o.a)(Object(o.a)({},e),{},Object(y.a)({},t.field,t.payload)):t.type===g?{}:void 0};var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useReducer)(k,e),n=Object(u.a)(t,2),a=n[0],c=n[1],i=function(e){var t=e.target;return c({type:w,field:t.name,payload:t.value})},s=function(){return c({type:g})};return{formState:a,updateField:i,resetForm:s}},C=n(160),S=n(94),H=n.n(S),N=n(44),T=n(82);var E=function(e){var t=e.name,n=e.initialState,r=void 0===n?{}:n,a=e.reducers,c=void 0===a?{}:a,i=e.routines,s=void 0===i?{}:i,u=e.routineReducers,b=void 0===u?H.a:u,l=e.extraReducers,d=void 0===l?{}:l,j=Object(C.a)(e,["name","initialState","reducers","routines","routineReducers","extraReducers"]);if("function"!==typeof b)throw new Error("routineReducers must be a function that returns a reducerMap");var h=Object.keys(s),p=h.reduce((function(e,n){return e[n]=Object(T.a)("".concat(t,"/").concat(s[n])),e}),{}),O=h.reduce((function(e,t){var n=p[t];return e[t]=Object(T.b)(n),e}),{}),f=Object(N.b)(Object(o.a)({name:t,reducers:c,initialState:r,extraReducers:Object(o.a)(Object(o.a)({},d),b(p))},j));return f.routines=p,f.promisifiedRoutines=O,f},R=E({name:"habits",initialState:{},reducers:{updateHabit:function(e,t){var n=t.payload,r=n.habit,a=n.id;e[a]=Object(o.a)(Object(o.a)({},e[a]),r)},addHabit:function(e,t){var n=t.payload,r=n.habit;e[n.id]=r},deleteHabit:function(e,t){delete e[t.payload.id]}},routines:{updateHistory:"UPDATE_HISTORY",createHabit:"CREATE_HABIT",updateHabit:"UPDATE_HABIT",deleteHabit:"DELETE_HABIT",fetchHabit:"FETCH_HABIT",swapHabit:"SWAP_HABIT",reorderHabit:"REORDER_HABIT"},routineReducers:function(e){return Object(y.a)({},e.createHabit.SUCCESS,(function(e,t){var n=t.payload,r=n.habit;e[n.id]=r}))}}),U=n(12),D=R.routines;var A=function(){var e=Object(U.d)();return Object(r.useCallback)((function(t){var n=t.habitName;e(D.createHabit.trigger({habitName:n}))}),[e])},P=n(42),F=function(e){return null===e||void 0===e?void 0:e.session},V=Object(P.a)(F,(function(e){return Boolean(e.user.uid)})),G=function(){return Object(U.e)(V)},W=n(1);function M(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],c=I(),i=c.formState,s=c.updateField,o=c.resetForm,b=A(),l=G(),d=Object(r.useCallback)((function(){a(!0)}),[]),j=Object(r.useCallback)((function(){a(!1)}),[]);return l?Object(W.jsxs)("div",{children:[Object(W.jsx)(p.a,{onClick:d,children:"Create Habit"}),Object(W.jsxs)(f.a,{open:n,onClose:j,"aria-labelledby":"create-habit-title",children:[Object(W.jsx)(m.a,{id:"create-habit-title",children:"Create Habit"}),Object(W.jsx)(v.a,{children:Object(W.jsx)(O.a,{autoFocus:!0,margin:"dense",id:"habitName",name:"habitName",value:i.habitName||"",onChange:s,label:"Habit Name",type:"text",fullWidth:!0,autoComplete:"off"})}),Object(W.jsxs)(x.a,{children:[Object(W.jsx)(p.a,{onClick:j,children:"Cancel"}),Object(W.jsx)(p.a,{onClick:function(e){b(i),o(),j()},children:"Create"})]})]})]}):null}var q=n(286),L=n(279),B=n(284),_=n(303),z=n(287),J=n(302),Y=n(162),K=n(285),X=n(163),Z=n(283);var $=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(r.useState)(e),n=Object(u.a)(t,2),a=n[0],c=n[1],i=Object(r.useCallback)((function(){c(!a)}),[a]);return[a,i,c]},Q=E({name:"session",initialState:{user:{},userSettings:{habitIds:[],habitViewType:"week"}},reducers:{setCurrentUser:function(e,t){e.user=t.payload.user},setUserSettings:function(e,t){e.userSettings=Object(o.a)(Object(o.a)({},e.userSettings),t.payload.userSettings)}},routines:{login:"LOGIN",logout:"LOGOUT",createUser:"CREATE_USER",updateHabitViewType:"UPDATE_HABIT_VIEW_TYPE"},routineReducers:function(e){var t;return t={},Object(y.a)(t,e.logout.SUCCESS,(function(e){e.user={}})),Object(y.a)(t,e.login.SUCCESS,(function(e,t){e.user=t.payload.user})),Object(y.a)(t,e.createUser.SUCCESS,(function(e,t){e.user=t.payload.user})),Object(y.a)(t,e.updateHabitViewType.SUCCESS,(function(e,t){e.userSettings.habitViewType=t.payload.habitViewType})),t}}),ee=Q.routines;var te=function(){var e=Object(U.d)();return Object(r.useCallback)((function(){e(ee.logout.trigger())}),[e])},ne=n(33),re=n(158),ae=n(281);var ce=function(e){var t=e.children,n=a.a.useMemo((function(){return Object(re.a)({palette:{type:"dark"}})}),[]);return Object(W.jsx)(ae.a,{theme:n,children:t})},ie=n(13),se=n(145),oe=n(41),ue=n.n(oe),be=Object(P.a)([F],(function(e){return ue()(e,"userSettings.habitIds",[])})),le=function(){return Object(U.e)(be)};var de=function(e){return e.habits},je=function(){return Object(U.e)(de)};var he=function(){var e=le(),t=je();return function(){!function(e){var t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download="simple_habit_tracker_"+(new Date).toLocaleString().replace(/\W/g,"_")+".json",a.click(),URL.revokeObjectURL(r)}({habitIds:e,habits:t})}};function pe(){var e=new Date;return{year:e.getFullYear(),month:e.getMonth(),day:e.getDate()}}var Oe,fe,xe=Object(P.a)([function(e){var t,n;return(null===e||void 0===e||null===(t=e.router)||void 0===t||null===(n=t.location)||void 0===n?void 0:n.pathname)||""}],(function(e){return"/archive"===e})),ve=Object(ie.a)(Oe||(Oe=Object(s.a)(['\n  position: relative;\n  ::after {\n    content: "','";\n    position: absolute;\n    left: 10px;\n    top: 10px;\n  }\n'])),"".concat(Object(se.a)(Date.now())).padStart(2,"0")),me=Object(ie.a)(fe||(fe=Object(s.a)(["\n  a {\n    color: inherit;\n    text-decoration: none;\n    &:hover {\n      text-decoration: none;\n    }\n  }\n"]))),ye=function(e){var t=$(),n=Object(u.a)(t,2),a=n[0],c=n[1],i=Object(U.e)(xe),s=Object(r.useRef)(),l=G(),j=te(),p=he();return Object(r.useEffect)((function(){var e=pe().day,t=setInterval((function(){try{var t=pe();e!==t.day&&window.location.reload()}catch(n){console.error(n)}}),1e4);return function(){clearInterval(t)}}),[]),Object(W.jsx)(b.a,{color:"inherit",position:"sticky",children:Object(W.jsxs)(Z.a,{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[Object(W.jsx)(X.a,{variant:"h6",noWrap:!0,children:Object(W.jsx)(ne.a,{style:{color:"inherit",textDecoration:"none"},to:"/",children:"Habit Tracker"})}),Object(W.jsx)("div",{style:{flexGrow:1,maxWidth:"960px"}}),!i&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(M,{}),Object(W.jsx)("div",{className:ve,children:Object(W.jsx)(h.a,{fontSize:"large"})})]}),Object(W.jsx)(B.a,{edge:"end","aria-label":"account of current user",ref:s,onClick:c,"aria-haspopup":"true",color:"inherit",children:Object(W.jsx)(d.a,{})}),Object(W.jsx)(K.a,{open:a,anchorEl:s.current,transition:!0,children:function(e){var t=e.TransitionProps,n=e.placement;return Object(W.jsx)(L.a,Object(o.a)(Object(o.a)({},t),{},{style:{transformOrigin:"bottom"===n?"center top":"center bottom"},children:Object(W.jsx)(Y.a,{children:Object(W.jsx)(q.a,{onClickAway:c,children:Object(W.jsxs)(W.Fragment,{children:[!l&&Object(W.jsxs)(J.a,{autoFocusItem:a,id:"menu-list-grow",onKeyDown:c,className:me,children:[Object(W.jsx)(_.a,{onClick:c,children:Object(W.jsx)(ne.a,{component:z.a,to:"/signin",children:"Login"})}),!1]}),l&&Object(W.jsxs)(J.a,{autoFocusItem:a,id:"menu-list-grow",onKeyDown:c,className:me,children:[i?Object(W.jsx)(_.a,{onClick:c,children:Object(W.jsx)(ne.a,{to:"/",children:"Home"})}):Object(W.jsx)(_.a,{onClick:c,children:Object(W.jsx)(ne.a,{to:"/archive",children:"Archive"})}),Object(W.jsx)(_.a,{onClick:function(){p(),c()},children:"Export Data"}),Object(W.jsx)(_.a,{onClick:function(){j(),c()},children:"Logout"})]})]})})})}))}})]})})},we=Q.routines;var ge,ke=function(){var e=Object(U.d)();return Object(r.useCallback)((function(t){e(we.login.trigger(t))}),[e])},Ie=Object(ie.a)(ge||(ge=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  > * {\n    margin: 5px;\n  }\n"]))),Ce=function(e){var t=e.className,n=I(),a=n.formState,c=n.updateField,i=ke(),s=Object(r.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),i(a)}),[a,i]);return Object(W.jsx)("div",{children:Object(W.jsxs)("form",{onSubmit:s,className:Object(ie.b)(Ie,t),children:["Sign In",Object(W.jsx)(O.a,{type:"email",label:"Email Address",value:a.email||"",name:"email",placeholder:"Email Address",onChange:c}),Object(W.jsx)(O.a,{type:"password",label:"Password",required:!0,name:"password",value:a.password||"",placeholder:"Your Password",onChange:c}),Object(W.jsx)(p.a,{variant:"contained",color:"primary",type:"submit",children:"Sign in"}),Object(W.jsx)(ne.a,{to:"/signup",children:"Sign up here"}),Object(W.jsx)(ne.a,{to:"/passwordreset",children:"Forgot Password?"})]})})},Se=Q.routines;var He,Ne=function(){var e=Object(U.d)();return Object(r.useCallback)((function(t){var n=t.displayName,r=t.email,a=t.password;e(Se.createUser.trigger({displayName:n,email:r,password:a}))}),[e])},Te=Object(ie.a)(He||(He=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  > * {\n    margin: 10px;\n  }\n"]))),Ee=function(e){var t=e.className,n=I(),a=n.formState,c=n.updateField,i=Ne(),s=Object(r.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),i(a)}),[i,a]);return Object(W.jsx)("div",{children:Object(W.jsxs)("form",{onSubmit:s,className:Object(ie.b)(Te,t),children:["Sign Up",Object(W.jsx)(O.a,{type:"text",label:"Display Name",value:a.displayName||"",name:"displayName",placeholder:"Display Name",onChange:c,required:!0}),Object(W.jsx)(O.a,{type:"email",label:"Email Address",value:a.email||"",name:"email",placeholder:"Email Address",onChange:c,required:!0}),Object(W.jsx)(O.a,{type:"password",label:"Password",required:!0,name:"password",value:a.password||"",placeholder:"Your Password",onChange:c}),Object(W.jsx)(p.a,{variant:"contained",color:"primary",type:"submit",children:"Sign Up"}),Object(W.jsx)(ne.a,{to:"/signin",children:"Sign in here"}),Object(W.jsx)(ne.a,{to:"/passwordreset",children:"Forgot Password?"})]})})};var Re=function(){return Object(W.jsx)("div",{})},Ue=n(72),De=n.n(Ue);n(138);var Ae=function(){var e=Object(U.d)();Object(r.useEffect)((function(){De.a.auth().onAuthStateChanged((function(t){e(Q.actions.setCurrentUser({user:t||{}}))}))}),[e])},Pe=n(21);n(230);var Fe=function(e){var t=e.path,n=e.children;return G()?Object(W.jsx)(Pe.b,{path:t,children:n}):Object(W.jsx)(Pe.a,{to:"/"})};var Ve=function(e){var t=e.path,n=e.children;return G()?Object(W.jsx)(Pe.a,{to:"/"}):Object(W.jsx)(Pe.b,{path:t,children:n})},Ge=n(288),We=n(149),Me=n(300);var qe,Le,Be,_e,ze,Je,Ye=function(e){for(var t=e.month,n=e.year,r=Object(Ge.a)(new Date(n,t)),a=Object(We.a)(new Date(n,t,1)),c=Object(Me.a)(new Date)-1,i=[],s=1;s<=r;){var o=[];if(0===i.length)for(var u=0;u<=6;u++)u<a?o.push(-1):(o.push(s),s++);else for(var b=0;b<=6;b++)s<=r?o.push(s):o.push(-1),s++;i.push(o)}return[i,c]},Ke=Object(ie.a)(qe||(qe=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n"]))),Xe=Object(ie.a)(Le||(Le=Object(s.a)(["\n  &:hover {\n    cursor: pointer;\n    background-color: rgb(180, 180, 180);\n  }\n"]))),Ze=Object(ie.a)(Be||(Be=Object(s.a)(["\n  height: 30px;\n  width: 30px;\n  border-radius: 5px;\n  background-color: rgb(220, 220, 220);\n  margin: 5px;\n"]))),$e=(Object(ie.a)(_e||(_e=Object(s.a)(["\n  background-color: rgb(51, 192, 255);\n  &:hover {\n    background-color: rgb(51, 192, 255, 0.5);\n  }\n"]))),Object(ie.a)(ze||(ze=Object(s.a)(["\n  background-color: #282d33;\n  color: white;\n"])))),Qe=Object(ie.a)(Je||(Je=Object(s.a)(["\n  background-color: gray;\n  &:hover {\n    opacity: 0.5;\n  }\n"])));var et=function(e){var t=e.week,n=void 0===t?[]:t,r=e.onDayClick,a=e.history;return Object(W.jsx)("div",{className:Object(ie.b)(Ke),children:n.map((function(e,t){var n=e>0?function(){return r&&r(e)}:H.a,c=Object(ie.b)(Ze,$e,e>0&&Xe,a[e]&&!1,a[e]&&Qe);return Object(W.jsx)("div",{className:c,onClick:n,children:e>0?e:""},"".concat(e,"-").concat(t))}))})},tt=function(e){return Object(P.a)([de],(function(t){return t[e]}))},nt=function(e){return Object(U.e)(tt(e))};var rt,at,ct=function(e){var t=e.month,n=e.year,a=e.habitId,c=e.habitViewType,i=Object(r.useMemo)((function(){return Ye({month:t,year:n})}),[t,n]),s=Object(u.a)(i,2),o=s[0],b=s[1],l=Object(U.d)(),d=Object(r.useCallback)((function(e){l(R.routines.updateHistory.trigger({day:e,month:t,year:n,habitId:a}))}),[l,a,t,n]),j=nt(a).history,h=void 0===j?{}:j;if("week"===c){var p=o[b];return Object(W.jsx)("div",{children:Object(W.jsx)(et,{week:p,onDayClick:d,history:ue()(h,[n,t],{})},b)})}return Object(W.jsx)("div",{children:o.map((function(e,r){return Object(W.jsx)(et,{week:e,onDayClick:d,history:ue()(h,[n,t],{})},r)}))})},it=n(291),st=n(155),ot=n.n(st),ut=n(289),bt=n(290),lt=n(150),dt=n.n(lt),jt=n(151),ht=n.n(jt),pt=n(153),Ot=n.n(pt),ft=n(152),xt=n.n(ft),vt=Object(ie.a)(rt||(rt=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),mt=Object(ie.a)(at||(at=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]))),yt=[{name:"January"},{name:"February"},{name:"March"},{name:"April"},{name:"May"},{name:"June"},{name:"July"},{name:"August"},{name:"September"},{name:"October"},{name:"November"},{name:"December"}];var wt=function(e){var t=e.children,n=e.currentMonth,a=void 0===n?Object(ut.a)(Date.now()):n,c=e.currentYear,i=void 0===c?Object(bt.a)(Date.now()):c,s=e.showMonthNavButtons,o=void 0===s||s,b=Object(r.useState)(a),l=Object(u.a)(b,2),d=l[0],j=l[1],h=Object(r.useState)(i),p=Object(u.a)(h,2),O=p[0],f=p[1],x=Object(r.useState)(!1),v=Object(u.a)(x,2),m=v[0],y=v[1],w=Object(r.useCallback)((function(){var e=d-1;e<0&&(e=11,f(O-1));j(e)}),[d,O]),g=Object(r.useCallback)((function(){var e=d+1;e>11&&(e=0,f(O+1));j(e)}),[d,O]);return Object(W.jsxs)("div",{className:vt,children:[Object(W.jsxs)("div",{className:mt,children:[Object(W.jsxs)("div",{className:mt,children:[o&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(B.a,{size:"small",onClick:w,children:Object(W.jsx)(dt.a,{})}),Object(W.jsx)(B.a,{size:"small",onClick:g,children:Object(W.jsx)(ht.a,{})})]}),Object(W.jsxs)(X.a,{variant:"h6",noWrap:!0,children:[yt[d].name," ",O]})]}),Object(W.jsx)(B.a,{size:"small",onClick:function(){y(!m)},children:m?Object(W.jsx)(xt.a,{}):Object(W.jsx)(Ot.a,{})})]}),Object(W.jsx)("div",{children:t({month:d,year:O,notesOpen:m})})]})},gt=n(299),kt=n(161),It=n(154),Ct=n.n(It),St=R.routines;var Ht=function(e){var t=Object(U.d)();return Object(r.useCallback)((function(){t(St.deleteHabit.trigger({habitId:e}))}),[t,e])},Nt=R.routines;var Tt=function(){var e=Object(U.d)();return Object(r.useCallback)((function(t){var n=t.id,r=t.habit;e(Nt.updateHabit.trigger({id:n,habit:r}))}),[e])},Et=function(e){var t=e.habitId,n=e.isOpen,r=e.setIsRenameOpen,a=nt(t),c=I(),i=c.formState,s=c.updateField,o=c.resetForm,u=Tt();return Object(W.jsxs)(f.a,{open:n,onClose:function(){return r(!1)},"aria-labelledby":"update-dialog",children:[Object(W.jsxs)(m.a,{id:"update-dialog",children:["Update Habit Name - ",a.name]}),Object(W.jsx)(v.a,{children:Object(W.jsx)(O.a,{autoFocus:!0,margin:"dense",id:"habitName",name:"habitName",value:i.habitName||"",onChange:s,label:"Habit Name",type:"text",fullWidth:!0,autoComplete:"off"})}),Object(W.jsxs)(x.a,{children:[Object(W.jsx)(p.a,{onClick:function(){return r(!1)},color:"primary",children:"Cancel"}),Object(W.jsx)(p.a,{onClick:function(e){u({id:t,habit:{name:i.habitName}}),o(),r(!1)},color:"primary",children:"Update Name"})]})]})},Rt=R.routines;var Ut,Dt,At=function(){var e=Object(U.d)();return Object(r.useCallback)((function(t){var n=t.habitId,r=t.newPosition;e(Rt.reorderHabit.trigger({habitId:n,newPosition:r}))}),[e])},Pt=n(295),Ft=function(e){var t=e.habitId,n=e.isOpen,r=e.setIsReorderOpen,a=je(),c=Object(U.e)(xe),i=a[t],s=le(),o=I(),u=o.formState,b=o.updateField,l=o.resetForm,d=At(),j=s.indexOf(t)+1,h=0;return Object(W.jsxs)(f.a,{open:n,onClose:function(){return r(!1)},"aria-labelledby":"update-dialog",children:[Object(W.jsxs)(m.a,{id:"update-dialog",children:["Update Order - ",i.name]}),Object(W.jsx)(v.a,{children:Object(W.jsx)(Pt.a,{id:"habitPosition",name:"habitPosition",value:u.habitPosition||j,onChange:b,fullWidth:!0,children:s.map((function(e,n){var r,i=a[e];if(c&&!1===(null===i||void 0===i?void 0:i.archived))return null;if(!c&&!0===(null===i||void 0===i?void 0:i.archived))return null;var s="select-".concat(t,"-menu-item-").concat(e),o=n+1;return Object(W.jsxs)(_.a,{value:o,id:s,children:["Position ",h++,": ",null===(r=a[e])||void 0===r?void 0:r.name]},s)}))})}),Object(W.jsxs)(x.a,{children:[Object(W.jsx)(p.a,{onClick:function(){return r(!1)},color:"primary",children:"Cancel"}),Object(W.jsx)(p.a,{onClick:function(e){var n=u.habitPosition-1;n>=0&&n!==j-1&&d({habitId:t,newPosition:n}),l(),r(!1)},color:"primary",disabled:!u.habitPosition||u.habitPosition===j,children:"Update Position"})]})]})},Vt=function(e){var t=e.isOpen,n=e.deleteHabit,r=e.closeDialog;return Object(W.jsxs)(f.a,{open:t,onClose:function(){r()},"aria-labelledby":"update-dialog",children:[Object(W.jsx)(m.a,{id:"update-dialog",children:"Delete Habit"}),Object(W.jsx)(v.a,{children:"Are you sure you want to delete this habit?"}),Object(W.jsxs)(x.a,{children:[Object(W.jsx)(p.a,{onClick:function(){r()},children:"Cancel"}),Object(W.jsx)(p.a,{onClick:function(e){n(),r()},children:"Delete"})]})]})},Gt=Object(ie.a)(Ut||(Ut=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  max-width: 1000px;\n  align-items: center;\n  justify-content: center;\n  margin: auto;\n"]))),Wt=Object(ie.a)(Dt||(Dt=Object(s.a)(["\n  margin: auto;\n  min-height: 320px;\n"]))),Mt={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},qt=function(){return Object(W.jsx)(X.a,{variant:"h6",children:"No History"})},Lt=function(e){var t=e.year,n=e.habitId,r=nt(n).history;if(!r)return Object(W.jsx)(qt,{});var a=r[t];if(!a)return Object(W.jsx)(qt,{});var c=Object.keys(a);return c&&0!==c.length?Object(W.jsx)("div",{className:Gt,children:c.map((function(e){var r=Mt[e];return Object(W.jsxs)("div",{className:Wt,children:[Object(W.jsx)(X.a,{variant:"h6",children:r}),Object(W.jsx)(ct,{month:e,year:t,habitId:n,habitViewType:"month"})]},"".concat(n,"-").concat(e,"-").concat(t))}))}):Object(W.jsx)(qt,{})},Bt=function(e){var t=e.habitId,n=e.isOpen,r=e.setIsHistoryOpen,a=nt(t),c=a.history,i=I(),s=i.formState,o=i.updateField,u=void 0;c&&(u=Object.keys(c));var b=Object(bt.a)(Date.now());return Object(W.jsxs)(f.a,{open:n,fullScreen:!0,onClose:function(){return r(!1)},"aria-labelledby":"update-dialog",children:[Object(W.jsxs)(m.a,{id:"update-dialog",children:["Habit History - ",a.name]}),Object(W.jsxs)(v.a,{children:[(!u||!c)&&Object(W.jsx)(X.a,{variant:"h6",children:"No History"}),u&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Pt.a,{id:"year",name:"year",value:s.year||b,onChange:o,fullWidth:!0,children:u.map((function(e,n){var r="select-".concat(t,"-menu-item-").concat(e);return Object(W.jsx)(_.a,{value:e,id:r,children:e},r)}))}),Object(W.jsx)(Lt,{year:s.year||b,habitId:t})]})]}),Object(W.jsx)(x.a,{children:Object(W.jsx)(p.a,{onClick:function(){return r(!1)},color:"primary",children:"Cancel"})})]})},_t=function(e){var t=e.habitId,n=e.isOpen,r=e.setIsArchiveOpen,a=nt(t),c=Tt(),i=a.archived?"Unarchive":"Archive";return Object(W.jsxs)(f.a,{open:n,onClose:function(){return r(!1)},"aria-labelledby":"update-dialog",children:[Object(W.jsxs)(m.a,{id:"update-dialog",children:[i," Habit - ",a.name]}),Object(W.jsx)(v.a,{}),Object(W.jsxs)(x.a,{children:[Object(W.jsx)(p.a,{onClick:function(){return r(!1)},color:"primary",children:"Cancel"}),Object(W.jsx)(p.a,{onClick:function(e){c({id:t,habit:{archived:!a.archived}}),r(!1)},color:"primary",children:i})]})]})},zt=function(e){var t=e.habitId,n=nt(t),a=Object(r.useRef)(),c=Object(r.useState)(!1),i=Object(u.a)(c,2),s=i[0],o=i[1],b=function(){return o(!1)},l=Object(r.useState)(!1),d=Object(u.a)(l,2),j=d[0],h=d[1],p=Object(r.useState)(!1),O=Object(u.a)(p,2),f=O[0],x=O[1],v=Object(r.useState)(!1),m=Object(u.a)(v,2),y=m[0],w=m[1],g=Object(r.useState)(!1),k=Object(u.a)(g,2),I=k[0],C=k[1],S=Object(r.useState)(!1),H=Object(u.a)(S,2),N=H[0],T=H[1],E=Ht(t);return n?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(B.a,{ref:a,edge:"end","aria-label":"options for habit",onClick:function(){return o(!0)},children:Object(W.jsx)(Ct.a,{})}),Object(W.jsxs)(kt.a,{id:"simple-menu",anchorEl:a.current,keepMounted:!0,open:s,onClose:b,children:[Object(W.jsx)(_.a,{onClick:function(){h(!0),b()},children:"Rename"})," ",Object(W.jsx)(_.a,{onClick:function(){x(!0),b()},children:"Reorder"}),Object(W.jsx)(_.a,{onClick:function(){w(!0),b()},children:"History"}),Object(W.jsx)(_.a,{onClick:function(){T(!0),b()},children:"Archive"}),Object(W.jsx)(_.a,{onClick:function(){C(!0),b()},children:"Delete"})]}),Object(W.jsx)(Et,{isOpen:j,habitId:t,setIsRenameOpen:h}),Object(W.jsx)(Ft,{isOpen:f,habitId:t,setIsReorderOpen:x}),Object(W.jsx)(Bt,{isOpen:y,habitId:t,setIsHistoryOpen:w}),Object(W.jsx)(Vt,{isOpen:I,deleteHabit:E,closeDialog:function(){return C(!1)}}),Object(W.jsx)(_t,{isOpen:N,habitId:t,setIsArchiveOpen:T})]}):null},Jt=n(298),Yt=R.routines;var Kt,Xt,Zt,$t,Qt,en,tn,nn,rn,an,cn=function(){var e=Object(U.d)();return Object(r.useCallback)((function(t){var n=t.firstHabitId,r=t.secondHabitId;e(Yt.swapHabit.trigger({firstHabitId:n,secondHabitId:r}))}),[e])},sn=Object(ie.a)(Kt||(Kt=Object(s.a)(["\n  opacity: 0.8;\n"]))),on=Object(ie.a)(Xt||(Xt=Object(s.a)(["\n  opacity: 0.5;\n"]))),un=function(e){var t,n=e.habitId,r=cn(),a=Object(Jt.a)({accept:"habit",canDrop:function(e){return"habit"===e.type&&e.id!==n},drop:function(e,t){var a=e.id;"habit"===e.type&&r({firstHabitId:a,secondHabitId:n})},collect:function(e){return{canDrop:e.canDrop(),isHovering:e.isOver()}}}),c=Object(u.a)(a,2),i=c[0],s=c[1];return Object(W.jsx)("div",{ref:s,className:Object(ie.b)((t={},Object(y.a)(t,on,i.canDrop),Object(y.a)(t,sn,i.isHovering&&i.canDrop),t)),children:e.children})},bn=n(239),ln=Object(ie.a)(Zt||(Zt=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),dn=Object(ie.a)($t||($t=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n"]))),jn=Object(ie.a)(Qt||(Qt=Object(s.a)(["\n  padding: 0.75rem;\n  border-radius: 0.5rem;\n  border: 1px solid black;\n"]))),hn=Object(ie.a)(en||(en=Object(s.a)(["\n  padding: 0.75rem;\n  border-radius: 0.5rem;\n  border: 1px solid black;\n  outline: none;\n"]))),pn=function(e){var t,n,a=e.notes,c=e.notesOpen,i=e.updateNotes,s=Object(r.useState)(!1),o=Object(u.a)(s,2),b=o[0],l=o[1],d=I(),j=d.formState,h=d.updateField,O=d.resetForm;return c?b?Object(W.jsxs)("div",{className:ln,children:[Object(W.jsx)(bn.a,{className:hn,autoFocus:!0,id:"notes",name:"notes",value:null!==(t=null!==(n=j.notes)&&void 0!==n?n:a)&&void 0!==t?t:"",onChange:h,autoComplete:"off"}),Object(W.jsxs)("div",{className:dn,children:[Object(W.jsx)(p.a,{onClick:function(){return l(!1)},color:"primary",children:"Cancel"}),Object(W.jsx)(p.a,{onClick:function(e){i&&i(j.notes),O(),l(!1)},color:"primary",children:"Update"})]})]}):Object(W.jsx)("pre",{className:jn,onClick:function(){l(!b)},children:a.length?a:"No Notes"}):null},On=Object(ie.a)(tn||(tn=Object(s.a)(["\n  margin: 8px;\n  padding: 16px;\n  text-transform: capitalize;\n  position: relative;\n"]))),fn=Object(ie.a)(nn||(nn=Object(s.a)(["\n  flex-grow: 1;\n"]))),xn=Object(ie.a)(rn||(rn=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]))),vn=Object(ie.a)(an||(an=Object(s.a)(["\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 18ch;\n"]))),mn=function(e){var t=e.habitId,n=e.order,r=e.habitViewType,a=nt(t),c=Object(U.e)(xe),i=Object(gt.a)({item:{id:t,type:"habit",order:n}}),s=Object(u.a)(i,3),o=s[1],b=s[2],l=Tt(),d=function(e){l({id:t,habit:{notes:e}})};if(!a)return null;if(c&&!1===a.archived)return null;if(!c&&!0===a.archived)return null;var j=a.name,h=a.notes;return Object(W.jsx)(un,{habitId:t,children:Object(W.jsxs)(it.a,{className:On,ref:b,children:[Object(W.jsxs)("div",{className:xn,children:[Object(W.jsx)(B.a,{ref:o,edge:"start","aria-label":"drag drop indicator for reordering habits",children:Object(W.jsx)(ot.a,{})}),Object(W.jsx)(X.a,{variant:"h6",className:vn,children:j}),Object(W.jsx)("div",{className:fn}),Object(W.jsx)(zt,{habitId:t})]}),Object(W.jsx)(wt,{showMonthNavButtons:"month"===r,children:function(e){var n=e.month,a=e.year,c=e.notesOpen;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(pn,{notes:null!==h&&void 0!==h?h:"",notesOpen:c,updateNotes:d}),Object(W.jsx)(ct,{month:n,year:a,habitId:t,habitViewType:r})]})}})]})})},yn=n(108),wn=Q.routines;var gn,kn,In,Cn,Sn,Hn=function(){var e=Object(U.d)();return Object(r.useCallback)((function(t){var n=t.habitViewType;e(wn.updateHabitViewType.trigger({habitViewType:n}))}),[e])},Nn=Object(P.a)(F,(function(e){return ue()(e,"userSettings.habitViewType","week")})),Tn=function(){return Object(U.e)(Nn)},En=n(156),Rn=Object(ie.a)(gn||(gn=Object(s.a)(["\n  width: ","px;\n  height: ","px;\n  border-radius: 50%;\n  text-transform: capitalize;\n  margin: 0.8rem;\n  font-size: 1rem;\n  white-space: normal;\n"])),110,110),Un=Object(ie.a)(kn||(kn=Object(s.a)(["\n  border: 5px solid lightblue;\n"]))),Dn=Object(ie.a)(In||(In=Object(s.a)(["\n  border: 5px solid green;\n"]))),An=function(e){var t=e.habitId,n=e.year,a=e.month,c=e.day,i=nt(t),s=Object(U.e)(xe),o=Object(U.d)(),u=Object(r.useCallback)((function(){o(R.routines.updateHistory.trigger({day:c,month:a,year:n,habitId:t}))}),[o,t,a,n,c]);if(!i)return null;if(s&&!1===i.archived)return null;if(!s&&!0===i.archived)return null;var b=i.name,l=i.history,d=Object(En.get)(l,[n,a,c],!1);return Object(W.jsx)("button",{className:Object(ie.b)(Rn,d&&Dn,!d&&Un),type:"button",onClick:function(e){e.stopPropagation(),e.preventDefault(),u()},children:b})},Pn=n(292),Fn="day",Vn="week",Gn="month",Wn=Object(ie.a)(Cn||(Cn=Object(s.a)(["\n  margin: 1rem;\n"]))),Mn=Object(ie.a)(Sn||(Sn=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  max-width: 1000px;\n  align-items: center;\n  @media only screen and (max-width: 1000px) {\n    justify-content: center;\n  }\n"]))),qn=function(){var e=le(),t=Object(U.e)(xe),n=Tn(),r=function(){var e=Hn();return function(t){if(t===Gn||t===Fn||t===Vn)return e({habitViewType:t})}}(),a=pe(),c=a.year,i=a.month,s=a.day;return Object(W.jsxs)(W.Fragment,{children:[t?Object(W.jsx)(X.a,{variant:"h6",children:"Archive"}):Object(W.jsx)(W.Fragment,{children:Object(W.jsxs)(Pn.a,{variant:"contained",size:"large",className:Wn,children:[Object(W.jsx)(p.a,{onClick:function(){return r(Fn)},children:"Today"}),Object(W.jsx)(p.a,{onClick:function(){return r(Vn)},children:"Week"}),Object(W.jsx)(p.a,{onClick:function(){return r(Gn)},children:"Month"})]})}),e.length>0&&Object(W.jsx)(yn.b,{flipKey:e.join(""),children:Object(W.jsx)("div",{className:Mn,children:e.map((function(e,t){return"day"===n?Object(W.jsx)(yn.a,{flipId:e,children:Object(W.jsx)("div",{children:Object(W.jsx)(An,{habitId:e,year:c,month:i,day:s})})},e):Object(W.jsx)(yn.a,{flipId:e,children:Object(W.jsx)("div",{children:Object(W.jsx)(mn,{habitId:e,order:t,habitViewType:n})})},e)}))})})]})};var Ln,Bn=function(){return Object(W.jsxs)("div",{children:[Object(W.jsx)(X.a,{variant:"h1",children:"Habit Tracker"}),Object(W.jsx)(X.a,{variant:"h4",children:"A Simple Habit Tracker App"}),Object(W.jsx)(X.a,{variant:"h5",children:"Login To Begin"})]})},_n=Object(ie.a)(Ln||(Ln=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"])));var zn=function(){Ae();var e=G();return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(ye,{}),Object(W.jsx)("div",{children:Object(W.jsxs)(Pe.d,{children:[Object(W.jsx)(Ve,{path:"/signin",children:Object(W.jsx)(Ce,{})}),Object(W.jsx)(Ve,{path:"/signup",children:Object(W.jsx)(Ee,{})}),Object(W.jsx)(Ve,{path:"/passwordreset",children:Object(W.jsx)("div",{children:"WIP"})}),Object(W.jsx)(Fe,{path:"/profile",children:Object(W.jsx)(Re,{})}),Object(W.jsx)(Fe,{path:"/notes",children:Object(W.jsx)(Re,{})}),Object(W.jsxs)(Pe.d,{children:[Object(W.jsx)(Pe.b,{path:"/archive",children:Object(W.jsx)("div",{className:_n,children:e?Object(W.jsx)(qn,{}):Object(W.jsx)(Bn,{})})}),Object(W.jsx)(Pe.b,{path:"/",children:Object(W.jsx)("div",{className:_n,children:e?Object(W.jsx)(qn,{}):Object(W.jsx)(Bn,{})})})]})]})})]})},Jn=n(139),Yn=n(66),Kn=n(67),Xn=n(6),Zn=n.n(Xn),$n=n(3),Qn=n(23);n(232);De.a.initializeApp({apiKey:"AIzaSyAz2bDKjUq8xaRJba2qF5JdTnbctXnkxZ4",authDomain:"habit-tracker-9e016.firebaseapp.com",databaseURL:"https://habit-tracker-9e016.firebaseio.com",projectId:"habit-tracker-9e016",storageBucket:"habit-tracker-9e016.appspot.com",messagingSenderId:"13324547217",appId:'1:13324547217:web:c21e824ec11e0271523b30"'});var er=De.a.auth(),tr=De.a.firestore();function nr(){return(nr=Object(Qn.a)(Zn.a.mark((function e(t){var n,r;return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,e.next=3,er.signInWithEmailAndPassword(n,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rr=function(e){return nr.apply(this,arguments)},ar=n(30),cr=Zn.a.mark(ir);function ir(e){var t,n,r,a,c;return Zn.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.email,r=t.password,i.prev=1,i.next=4,Object($n.f)(Q.routines.login.request());case 4:return i.next=6,Object($n.b)(rr,{email:n,password:r});case 6:return a=i.sent,c=a.user,i.next=10,Object($n.f)(Q.routines.login.success({user:c}));case 10:return i.next=12,Object($n.f)(Object(ar.d)("/"));case 12:i.next=19;break;case 14:return i.prev=14,i.t0=i.catch(1),console.error(i.t0),i.next=19,Object($n.f)(Q.routines.login.failure(i.t0));case 19:return i.prev=19,i.next=22,Object($n.f)(Q.routines.login.fulfill());case 22:return i.finish(19);case 23:case"end":return i.stop()}}),cr,null,[[1,14,19,23]])}var sr=ir;function or(e){return ur.apply(this,arguments)}function ur(){return(ur=Object(Qn.a)(Zn.a.mark((function e(t){var n,r;return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("User does not exist");case 2:return n=tr.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=11;break}return r={habitIds:[]},e.next=10,n.set(r);case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function br(){return(br=Object(Qn.a)(Zn.a.mark((function e(t){var n,r,a,c,i;return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,a=t.displayName,e.next=3,er.createUserWithEmailAndPassword(n,r);case 3:return c=e.sent,(i=c.user).updateProfile({displayName:a}),or(i),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lr=function(e){return br.apply(this,arguments)},dr=Zn.a.mark(jr);function jr(e){var t,n,r,a,c;return Zn.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.displayName,r=t.email,a=t.password,i.prev=1,i.next=4,Object($n.f)(Q.routines.createUser.request());case 4:return i.next=6,Object($n.b)(lr,{email:r,password:a,displayName:n});case 6:return c=i.sent,i.next=9,Object($n.f)(Q.routines.createUser.success({user:c}));case 9:return i.next=11,Object($n.f)(Object(ar.d)("/"));case 11:i.next=18;break;case 13:return i.prev=13,i.t0=i.catch(1),console.error(i.t0),i.next=18,Object($n.f)(Q.routines.createUser.failure(i.t0));case 18:return i.prev=18,i.next=21,Object($n.f)(Q.routines.createUser.fulfill());case 21:return i.finish(18);case 22:case"end":return i.stop()}}),dr,null,[[1,13,18,22]])}var hr=jr;var pr=function(){return er.signOut()},Or=Zn.a.mark(fr);function fr(){return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object($n.f)(Q.routines.logout.request());case 3:return e.next=5,Object($n.b)(pr);case 5:return e.next=7,Object($n.f)(Q.routines.logout.success());case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(0),console.error(e.t0),e.next=14,Object($n.f)(Q.routines.logout.failure(e.t0));case 14:return e.prev=14,e.next=17,Object($n.f)(Q.routines.logout.fulfill());case 17:return e.finish(14);case 18:case"end":return e.stop()}}),Or,null,[[0,9,14,18]])}var xr=fr,vr=Object(P.a)(F,(function(e){return ue()(e,"user.uid",void 0)})),mr=Zn.a.mark(kr),yr=Zn.a.mark(Ir),wr=Zn.a.mark(Cr);function gr(e){var t=e.userId;return Object(Kn.b)((function(e){return tr.doc("users/".concat(t)).onSnapshot((function(n){e({data:n.data(),userId:t})}))}))}function kr(){var e,t,n,r;return Zn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object($n.h)(vr);case 2:return e=a.sent,a.next=5,Object($n.b)(gr,{userId:e});case 5:t=a.sent,a.prev=6;case 7:return a.next=10,Object($n.j)(t);case 10:return n=a.sent,r=n.data,a.next=14,Object($n.f)(Q.actions.setUserSettings({userSettings:r}));case 14:a.next=7;break;case 16:return a.prev=16,a.next=19,Object($n.d)();case 19:if(!a.sent){a.next=21;break}t.close();case 21:return a.finish(16);case 22:case"end":return a.stop()}}),mr,null,[[6,,16,22]])}function Ir(e){var t;return Zn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object($n.e)(kr,e);case 2:return t=n.sent,n.next=5,Object($n.j)(Q.routines.logout.SUCCESS);case 5:if(n.sent.type!==Q.routines.logout.SUCCESS){n.next=9;break}return n.next=9,Object($n.c)(t);case 9:case"end":return n.stop()}}),yr)}function Cr(){return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($n.l)([Q.actions.setCurrentUser,Q.routines.login.SUCCESS,Q.routines.createUser.SUCCESS],Ir);case 2:case"end":return e.stop()}}),wr)}function Sr(){return(Sr=Object(Qn.a)(Zn.a.mark((function e(t){var n,r,a;return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,r=t.habitViewType,a=tr.collection("users").doc(n),e.next=4,tr.runTransaction(function(){var e=Object(Qn.a)(Zn.a.mark((function e(t){var n,c;return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(a);case 2:n=e.sent,c=n.data(),t.update(a,{habitIds:c.habitIds,habitViewType:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hr=function(e){return Sr.apply(this,arguments)},Nr=Zn.a.mark(Tr);function Tr(e){var t,n,r;return Zn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.habitViewType,a.next=3,Object($n.h)(vr);case 3:return n=a.sent,a.prev=4,a.next=7,Object($n.f)(Q.routines.updateHabitViewType.request());case 7:return a.next=9,Object($n.b)(Hr,{userId:n,habitViewType:t});case 9:return r=a.sent,a.next=12,Object($n.f)(Q.routines.updateHabitViewType.success({userId:r,habitViewType:t}));case 12:a.next=19;break;case 14:return a.prev=14,a.t0=a.catch(4),console.error(a.t0),a.next=19,Object($n.f)(Q.routines.updateHabitViewType.failure(a.t0));case 19:return a.prev=19,a.next=22,Object($n.f)(Q.routines.updateHabitViewType.fulfill());case 22:return a.finish(19);case 23:case"end":return a.stop()}}),Nr,null,[[4,14,19,23]])}var Er=Tr,Rr=Zn.a.mark(Ur);function Ur(){return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($n.k)(Q.routines.login.TRIGGER,sr);case 2:return e.next=4,Object($n.k)(Q.routines.logout.TRIGGER,xr);case 4:return e.next=6,Object($n.k)(Q.routines.createUser.TRIGGER,hr);case 6:return e.next=8,Object($n.k)(Q.routines.updateHabitViewType.TRIGGER,Er);case 8:return e.next=10,Object($n.e)(Cr);case 10:case"end":return e.stop()}}),Rr)}var Dr=Ur,Ar=n(57);function Pr(){return(Pr=Object(Qn.a)(Zn.a.mark((function e(t){var n,r,a,c,i,s,u;return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,r=t.habitName,a=t.options,c=void 0===a?{}:a,i=tr.collection("users").doc(n),s=tr.collection("habits").doc(),u=s.id,e.next=6,tr.runTransaction(function(){var e=Object(Qn.a)(Zn.a.mark((function e(t){var a,b;return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(i);case 2:a=e.sent,b=a.data(),t.set(s,Object(o.a)({name:r,userId:n,archived:!1},c)),t.update(i,Object(o.a)(Object(o.a)({},b),{},{habitIds:[].concat(Object(Ar.a)(b.habitIds),[u])}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:return e.t0=u,e.next=9,tr.collection("habits").doc(u).get();case 9:return e.t1=e.sent.data(),e.abrupt("return",[e.t0,e.t1]);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fr=function(e){return Pr.apply(this,arguments)},Vr=Zn.a.mark(Gr);function Gr(e){var t,n,r,a,c,i,s,o,b;return Zn.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,n=t.habitName,r=t.options,a=void 0===r?{}:r,l.next=3,Object($n.h)(vr);case 3:return c=l.sent,l.prev=4,l.next=7,Object($n.f)(R.routines.createHabit.request());case 7:return l.next=9,Object($n.b)(Fr,{userId:c,habitName:n,options:a});case 9:return i=l.sent,s=Object(u.a)(i,2),o=s[0],b=s[1],l.next=15,Object($n.f)(R.routines.createHabit.success({habit:b,id:o}));case 15:l.next=22;break;case 17:return l.prev=17,l.t0=l.catch(4),console.error(l.t0),l.next=22,Object($n.f)(R.routines.createHabit.failure(l.t0));case 22:return l.prev=22,l.next=25,Object($n.f)(R.routines.createHabit.fulfill());case 25:return l.finish(22);case 26:case"end":return l.stop()}}),Vr,null,[[4,17,22,26]])}var Wr=Gr;function Mr(){return(Mr=Object(Qn.a)(Zn.a.mark((function e(t){var n,r,a,c;return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.habit,a=tr.collection("habits").doc(n),c=Object(o.a)({},r),e.next=5,a.set(c,{merge:!0});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qr=function(e){return Mr.apply(this,arguments)},Lr=Zn.a.mark(Br);function Br(e){var t,n,r;return Zn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,n=t.id,r=t.habit,a.prev=1,a.next=4,Object($n.f)(R.routines.updateHabit.request());case 4:return a.next=6,Object($n.b)(qr,{id:n,habit:r});case 6:return a.next=8,Object($n.f)(R.routines.updateHabit.success({id:n,updatedHabitProperties:r}));case 8:a.next=15;break;case 10:return a.prev=10,a.t0=a.catch(1),console.error(a.t0),a.next=15,Object($n.f)(R.routines.updateHabit.failure(a.t0));case 15:return a.prev=15,a.next=18,Object($n.f)(R.routines.updateHabit.fulfill());case 18:return a.finish(15);case 19:case"end":return a.stop()}}),Lr,null,[[1,10,15,19]])}var _r=Br;function zr(){return(zr=Object(Qn.a)(Zn.a.mark((function e(t){var n,r,a,c,i,s,o;return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.year,r=t.month,a=t.day,c=t.habitId,i=t.newValue,s=tr.collection("habits").doc(c),o={history:Object(y.a)({},n,Object(y.a)({},r,Object(y.a)({},a,i)))},e.next=5,s.set(o,{merge:!0});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Jr=function(e){return zr.apply(this,arguments)},Yr=Zn.a.mark(Kr);function Kr(e){var t,n,r,a,c,i,s,o,u;return Zn.a.wrap((function(b){for(;;)switch(b.prev=b.next){case 0:return t=e.payload,n=t.day,r=t.month,a=t.year,c=t.habitId,b.prev=1,b.next=4,Object($n.f)(R.routines.updateHistory.request());case 4:return b.next=6,Object($n.h)(tt(c));case 6:return i=b.sent,s=i.history,o=void 0===s?{}:s,u=ue()(o,[a,r,n],!1),b.next=11,Object($n.b)(Jr,{year:a,month:r,day:n,habitId:c,newValue:!u});case 11:return b.next=13,Object($n.f)(R.routines.updateHistory.success());case 13:b.next=20;break;case 15:return b.prev=15,b.t0=b.catch(1),console.error(b.t0),b.next=20,Object($n.f)(R.routines.updateHistory.failure(b.t0));case 20:return b.prev=20,b.next=23,Object($n.f)(R.routines.updateHistory.fulfill());case 23:return b.finish(20);case 24:case"end":return b.stop()}}),Yr,null,[[1,15,20,24]])}var Xr=Kr,Zr=Zn.a.mark(ta),$r=Zn.a.mark(na),Qr=Zn.a.mark(ra);function ea(e){var t=e.userId;return Object(Kn.b)((function(e){return tr.collection("habits").where("userId","==",t).onSnapshot((function(t){t.docChanges().forEach((function(t){e({type:t.type,data:t.doc.data(),id:t.doc.id})}))}))}))}function ta(e){var t,n,r,a,c,i;return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($n.h)(vr);case 2:return t=e.sent,e.next=5,Object($n.b)(ea,{userId:t});case 5:n=e.sent,e.prev=6;case 7:return e.next=10,Object($n.j)(n);case 10:r=e.sent,a=r.data,c=r.id,i=r.type,e.t0=i,e.next="added"===e.t0?17:"modified"===e.t0?20:"removed"===e.t0?23:26;break;case 17:return e.next=19,Object($n.f)(R.actions.addHabit({habit:a,id:c}));case 19:return e.abrupt("break",27);case 20:return e.next=22,Object($n.f)(R.actions.updateHabit({habit:a,id:c}));case 22:return e.abrupt("break",27);case 23:return e.next=25,Object($n.f)(R.actions.deleteHabit({habit:a,id:c}));case 25:case 26:return e.abrupt("break",27);case 27:e.next=7;break;case 29:return e.prev=29,e.next=32,Object($n.d)();case 32:if(!e.sent){e.next=34;break}n.close();case 34:return e.finish(29);case 35:case"end":return e.stop()}}),Zr,null,[[6,,29,35]])}function na(e){var t;return Zn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object($n.e)(ta,e);case 2:return t=n.sent,n.next=5,Object($n.j)(Q.routines.logout.SUCCESS);case 5:if(n.sent.type!==Q.routines.logout.SUCCESS){n.next=9;break}return n.next=9,Object($n.c)(t);case 9:case"end":return n.stop()}}),$r)}function ra(){return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($n.l)([Q.actions.setCurrentUser,Q.routines.login.SUCCESS,Q.routines.createUser.SUCCESS],na);case 2:case"end":return e.stop()}}),Qr)}var aa=ra;function ca(){return(ca=Object(Qn.a)(Zn.a.mark((function e(t){var n,r,a,c;return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,r=t.habitId,a=tr.collection("users").doc(n),c=tr.collection("habits").doc(r),e.next=5,tr.runTransaction(function(){var e=Object(Qn.a)(Zn.a.mark((function e(t){var n,i,s;return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(a);case 2:n=e.sent,i=n.data(),t.delete(c),s=i.habitIds.filter((function(e){return e!==r})),t.update(a,{habitIds:s});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ia=function(e){return ca.apply(this,arguments)},sa=Zn.a.mark(oa);function oa(e){var t,n;return Zn.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.habitId,r.next=3,Object($n.h)(vr);case 3:return n=r.sent,r.prev=4,r.next=7,Object($n.f)(R.routines.deleteHabit.request());case 7:return r.next=9,Object($n.b)(ia,{userId:n,habitId:t});case 9:return r.next=11,Object($n.f)(R.routines.deleteHabit.success({id:t}));case 11:r.next=18;break;case 13:return r.prev=13,r.t0=r.catch(4),console.error(r.t0),r.next=18,Object($n.f)(R.routines.deleteHabit.failure(r.t0));case 18:return r.prev=18,r.next=21,Object($n.f)(R.routines.deleteHabit.fulfill());case 21:return r.finish(18);case 22:case"end":return r.stop()}}),sa,null,[[4,13,18,22]])}var ua=oa;function ba(){return(ba=Object(Qn.a)(Zn.a.mark((function e(t){var n,r,a,c;return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,r=t.firstHabitId,a=t.secondHabitId,c=tr.collection("users").doc(n),e.next=4,tr.runTransaction(function(){var e=Object(Qn.a)(Zn.a.mark((function e(t){var n,i,s,o,u;return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(c);case 2:if(n=e.sent,(i=n.data())&&i.habitIds.includes(r)&&i.habitIds.includes(a)){e.next=6;break}throw new Error("habit does not exist, cannot move the habit");case 6:return s=Object(Ar.a)(i.habitIds),o=s.indexOf(r),u=s.indexOf(a),s[o]=a,s[u]=r,e.next=13,t.update(c,{habitIds:s});case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var la=function(e){return ba.apply(this,arguments)},da=Zn.a.mark(ja);function ja(e){var t,n,r,a,c;return Zn.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.firstHabitId,r=t.secondHabitId,i.next=3,Object($n.h)(vr);case 3:return a=i.sent,i.prev=4,i.next=7,Object($n.f)(R.routines.swapHabit.request());case 7:return i.next=9,Object($n.b)(la,{userId:a,firstHabitId:n,secondHabitId:r});case 9:return c=i.sent,i.next=12,Object($n.f)(R.routines.swapHabit.success({habitIds:c}));case 12:i.next=19;break;case 14:return i.prev=14,i.t0=i.catch(4),console.error(i.t0),i.next=19,Object($n.f)(R.routines.swapHabit.failure(i.t0));case 19:return i.prev=19,i.next=22,Object($n.f)(R.routines.swapHabit.fulfill());case 22:return i.finish(19);case 23:case"end":return i.stop()}}),da,null,[[4,14,19,23]])}var ha=ja;function pa(e,t,n){var r=e.indexOf(t);if(-1===r)return console.error('Error: Element with ID "'.concat(t,'" not found in the array.')),null;if(r===n)return Object(Ar.a)(e);var a=Object(Ar.a)(e),c=a.splice(r,1),i=Object(u.a)(c,1)[0],s=Math.min(Math.max(0,n),a.length);return a.splice(s,0,i),a}function Oa(){return(Oa=Object(Qn.a)(Zn.a.mark((function e(t){var n,r,a,c;return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,r=t.habitId,a=t.newPosition,c=tr.collection("users").doc(n),e.next=4,tr.runTransaction(function(){var e=Object(Qn.a)(Zn.a.mark((function e(t){var n,i,s,o;return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(c);case 2:if(n=e.sent,(i=n.data())&&i.habitIds.includes(r)){e.next=6;break}throw new Error("habit does not exist, cannot move the habit");case 6:if((s=Object(Ar.a)(i.habitIds))[a]){e.next=9;break}throw new Error("habit position does not exist, cannot move the habit");case 9:return o=pa(s,r,a),e.next=12,t.update(c,{habitIds:o});case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fa=function(e){return Oa.apply(this,arguments)},xa=Zn.a.mark(va);function va(e){var t,n,r,a,c;return Zn.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.habitId,r=t.newPosition,i.next=3,Object($n.h)(vr);case 3:return a=i.sent,i.prev=4,i.next=7,Object($n.f)(R.routines.reorderHabit.request());case 7:return i.next=9,Object($n.b)(fa,{userId:a,habitId:n,newPosition:r});case 9:return c=i.sent,i.next=12,Object($n.f)(R.routines.reorderHabit.success({habitIds:c}));case 12:i.next=19;break;case 14:return i.prev=14,i.t0=i.catch(4),console.error(i.t0),i.next=19,Object($n.f)(R.routines.reorderHabit.failure(i.t0));case 19:return i.prev=19,i.next=22,Object($n.f)(R.routines.reorderHabit.fulfill());case 22:return i.finish(19);case 23:case"end":return i.stop()}}),xa,null,[[4,14,19,23]])}var ma=va,ya=Zn.a.mark(wa);function wa(){return Zn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($n.k)(R.routines.createHabit.TRIGGER,Wr);case 2:return e.next=4,Object($n.k)(R.routines.updateHabit.TRIGGER,_r);case 4:return e.next=6,Object($n.k)(R.routines.updateHistory.TRIGGER,Xr);case 6:return e.next=8,Object($n.k)(R.routines.deleteHabit.TRIGGER,ua);case 8:return e.next=10,Object($n.k)(R.routines.swapHabit.TRIGGER,ha);case 10:return e.next=12,Object($n.k)(R.routines.reorderHabit.TRIGGER,ma);case 12:return e.next=14,Object($n.e)(aa);case 14:case"end":return e.stop()}}),ya)}var ga=wa,ka=Zn.a.mark(Ia);function Ia(){var e;return Zn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[Dr,ga,T.c],t.next=3,Object($n.a)(e.map((function(e){return Object($n.i)(Zn.a.mark((function t(){return Zn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,Object($n.b)(e);case 4:return t.abrupt("break",12);case 7:t.prev=7,t.t0=t.catch(1),console.error(t.t0);case 10:t.next=0;break;case 12:case"end":return t.stop()}}),t,null,[[1,7]])})))})));case 3:case"end":return t.stop()}}),ka)}var Ca=Ia,Sa=function(e){var t=e.initialState,n=void 0===t?{}:t,r=e.history,a=Object(Kn.a)(),c=[a,Object(Jn.a)(r)],i=Object(N.a)({reducer:{session:Q.reducer,habits:R.reducer,router:Object(Yn.b)(r)},middleware:c,preloadedState:n});return a.run(Ca),i},Ha=n(294),Na=n(157),Ta=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ea(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Ra=n(34),Ua=n(159),Da=Object(Ra.b)();document.addEventListener("DOMContentLoaded",(function(){var e=Sa({history:Da});return i.a.render(Object(W.jsx)(a.a.StrictMode,{children:Object(W.jsx)(U.a,{store:e,children:Object(W.jsx)(Ua.a,{options:Na.a,children:Object(W.jsx)(Yn.a,{history:Da,children:Object(W.jsxs)(ce,{children:[Object(W.jsx)(Ha.a,{}),Object(W.jsx)(zn,{})]})})})})}),document.getElementById("root"))})),function(e){if("serviceWorker"in navigator){if(new URL("https://aarronlee.com/simple-habit-tracker",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("https://aarronlee.com/simple-habit-tracker","/service-worker.js");Ta?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ea(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Ea(t,e)}))}}()}},[[236,1,2]]]);
//# sourceMappingURL=main.ab684059.chunk.js.map