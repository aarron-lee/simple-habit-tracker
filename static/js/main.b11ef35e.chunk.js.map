{"version":3,"sources":["hooks/useForm.js","redux-modules/utils/createSliceWithRoutines.js","redux-modules/habits/habitsSlice.js","redux-modules/habits/hooks/useCreateHabit.js","redux-modules/session/selectors/sessionSliceSelector.js","redux-modules/session/selectors/isLoggedInSelector.js","hooks/useLoggedIn.js","ui/molecules/dialogs/CreateHabitDialog.tsx","hooks/useToggle.js","redux-modules/session/sessionSlice.js","redux-modules/session/hooks/useLogout.js","ui/atoms/themeProvider/ThemeProvider.js","ui/atoms/navigation/NavBar.js","redux-modules/session/hooks/useLogin.js","ui/pages/session/SignIn.tsx","redux-modules/session/hooks/useCreateUser.js","ui/pages/session/SignUp.tsx","ui/pages/ProfilePage.tsx","hooks/useAuthPersistence.js","ui/atoms/route/AuthRoute.js","ui/atoms/route/UnAuthRoute.js","redux-modules/habits/selectors/habitIdsSelectors.js","redux-modules/habits/hooks/useHabitIds.js","ui/molecules/calendar/calculateWeeksInMonth.js","ui/molecules/calendar/Week.js","redux-modules/habits/selectors/habitsSliceSelector.js","redux-modules/habits/selectors/habitSelector.js","redux-modules/habits/hooks/useHabit.js","ui/molecules/calendar/Calendar.js","ui/molecules/calendar/MonthNav.js","redux-modules/habits/hooks/useDeleteHabit.js","redux-modules/habits/hooks/useUpdateHabit.js","ui/molecules/dialogs/RenameHabitDialog.tsx","redux-modules/habits/hooks/useReorderHabit.js","redux-modules/habits/hooks/useHabits.js","ui/molecules/dialogs/ReorderHabitDialog.tsx","ui/molecules/dialogs/DeleteHabitDialog.tsx","ui/molecules/habit/HabitOptions.tsx","redux-modules/habits/hooks/useSwapHabit.js","ui/molecules/habit/HabitDropZone.tsx","ui/molecules/habit/HabitNotes.tsx","ui/molecules/habit/Habit.tsx","redux-modules/session/hooks/useUpdateHabitView.js","redux-modules/session/selectors/habitViewTypeSelector.js","redux-modules/session/hooks/useHabitViewType.js","ui/molecules/habits/Habits.tsx","ui/pages/LandingPage.tsx","App.tsx","firebase/firebase.js","firebase/users/loginUser.js","redux-modules/session/sagas/loginSaga.js","firebase/users/createUser.js","redux-modules/session/sagas/createUserSaga.js","firebase/users/logoutUser.js","redux-modules/session/sagas/logoutSaga.js","redux-modules/session/selectors/currentUserIdSelector.js","redux-modules/session/sagas/subcribeToUserSettingsSaga.js","firebase/users/updateHabitViewType.js","redux-modules/session/sagas/updateHabitViewTypeSaga.js","redux-modules/session/sagas/sessionSagas.js","firebase/habits/createHabit.js","redux-modules/habits/sagas/createHabitSaga.js","firebase/habits/updateHabit.js","redux-modules/habits/sagas/updateHabitSaga.js","firebase/habits/updateHistory.js","redux-modules/habits/sagas/updateHistorySaga.js","redux-modules/habits/sagas/subcribeToHabitsSaga.js","firebase/habits/deleteHabit.js","redux-modules/habits/sagas/deleteHabitSaga.js","firebase/habits/swapHabitOrder.ts","redux-modules/habits/sagas/swapHabitOrderSaga.js","firebase/habits/reorderHabit.ts","redux-modules/habits/sagas/reorderHabitSaga.js","redux-modules/habits/sagas/habitSagas.js","redux-modules/rootSaga.js","redux-modules/store.js","serviceWorkerRegistration.ts","index.tsx"],"names":["SET","RESET","formReducer","state","action","type","field","payload","useForm","initialState","useReducer","dispatch","updateField","target","name","value","resetForm","formState","createSliceWithRoutines","reducers","routines","routineInfo","routineReducers","noop","extraReducers","otherArgs","Error","routineNames","Object","keys","reduce","createdRoutines","routineName","createRoutine","promisifiedRoutines","promisifiedRoutinesAcc","routine","promisifyRoutine","slice","createSlice","habitsSlice","updateHabit","habit","id","addHabit","deleteHabit","updateHistory","createHabit","fetchHabit","swapHabit","reorderHabit","SUCCESS","useCreateHabit","useDispatch","useCallback","habitName","trigger","sessionSliceSelector","session","isLoggedInSelector","createSelector","sessionSlice","Boolean","user","uid","useLoggedIn","useSelector","FormDialog","useState","open","setOpen","isLoggedIn","handleClickOpen","handleClose","Button","onClick","Dialog","onClose","aria-labelledby","DialogTitle","DialogContent","TextField","autoFocus","margin","onChange","label","fullWidth","autoComplete","DialogActions","e","useToggle","defaultValue","toggle","setToggle","toggleValue","userSettings","habitIds","habitViewType","setCurrentUser","setUserSettings","login","logout","createUser","updateHabitViewType","useLogout","ThemeProvider","children","theme","React","useMemo","createMuiTheme","palette","calendarStyles","css","getDate","Date","now","padStart","linkStyles","NavBar","props","toggleState","openMenuRef","useRef","AppBar","color","position","Toolbar","style","display","flexDirection","justifyContent","alignItems","Typography","variant","noWrap","textDecoration","to","flexGrow","maxWidth","className","fontSize","IconButton","edge","aria-label","ref","aria-haspopup","Popper","anchorEl","current","transition","TransitionProps","placement","Grow","transformOrigin","Paper","ClickAwayListener","onClickAway","MenuList","autoFocusItem","onKeyDown","MenuItem","component","MuiLink","process","useLogin","loginInfo","formStyles","SignIn","onSubmit","event","preventDefault","stopPropagation","cx","email","placeholder","required","password","useCreateUser","userInfo","displayName","SignUp","ProfilePage","useAuthPersistence","useEffect","firebase","auth","onAuthStateChanged","userAuth","actions","AuthRoute","path","UnAuthRoute","habitIdsSelector","get","useHabitIds","calculateWeeksInMonth","month","year","numDaysInMonth","getDaysInMonth","firstDayOfMonth","getDay","weekNumForToday","getWeekOfMonth","weeks","currentDay","week","length","i","push","dayContainerStyles","clickableStyles","dayStyles","darkThemeStyles","darkActiveStyles","Week","onDayClick","history","map","day","idx","habitsSliceSelector","habits","habitSelector","habitId","useHabit","Calendar","monthNavContainerStyles","navStyles","Months","MonthNav","currentMonth","getMonth","currentYear","getYear","showMonthNavButtons","setMonth","setYear","notesOpen","setNotesOpen","navigateBackwards","newMonth","navigateForwards","size","useDeleteHabit","useUpdateHabit","RenameHabitDialog","isOpen","setIsRenameOpen","useReorderHabit","newPosition","useHabits","ReorderHabitDialog","setIsReorderOpen","habitsIds","currentPositionIdx","indexOf","InputLabel","Select","habitPosition","k","DeleteHabitDialog","closeDialog","HabitOptions","iconButtonRef","setIsOpen","closeOptions","renameOpen","reorderOpen","deleteOpen","setIsDeleteOpen","Menu","keepMounted","useSwapHabit","firstHabitId","secondHabitId","hoveringStyles","canDropStyles","HabitDropZone","useDrop","accept","canDrop","item","drop","monitor","droppedItemId","collect","isHovering","isOver","dropCollectedProps","buttonContainerStyles","preStyles","textAreaStyles","HabitNotes","notes","updateNotes","editNotes","setEditNotes","TextareaAutosize","cardStyles","fillerStyles","cardHeaderStyles","titleStyles","Habit","order","useDrag","drag","preview","Card","useUpdateHabitViewType","info","habitViewTypeSelector","useHabitViewType","HABIT_VIEW_TYPE","habitContainerStyles","weekHabitContainerStyles","Habits","toggleHabitViewType","useToggleHabitViewType","flipKey","join","flipId","LandingPage","appStyles","App","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firestore","a","signInWithEmailAndPassword","loginUser","loginSaga","put","request","call","success","console","error","failure","fulfill","generateUserDocument","userRef","doc","exists","newUserInfo","set","createUserWithEmailAndPassword","updateProfile","createUserSaga","logoutUser","signOut","logoutSaga","currentUserIdSelector","undefined","listen","handleSubscribe","subscribeToUserSettingsSaga","subscriptionChannel","userId","eventChannel","emitter","onSnapshot","querySnapshot","data","select","currentUserId","channel","take","cancelled","close","fork","listenTask","cancel","takeLatest","userSettingsRef","collection","runTransaction","transaction","userSettingsDoc","update","updateHabitViewTypeSaga","sessionSagas","takeEvery","TRIGGER","options","habitRef","archived","createHabitSaga","newHabit","newData","merge","updateHabitSaga","updatedHabitProperties","newValue","updateHistorySaga","currentValue","subscribeToHabitsSaga","where","docChanges","forEach","change","delete","newHabitIds","filter","deleteHabitSaga","includes","firstHabitIdx","secondHabitIdx","swapHabitOrder","swapHabitOrderSaga","move","arr","oldPosition","newArr","splice","elementToMove","targetPosition","Math","min","max","result","reorderHabitSaga","habitSagas","rootSaga","sagas","sessionsSaga","routinePromiseWatcherSaga","all","saga","spawn","allSagas","createStore","sagaMiddleware","createSagaMiddleware","middleware","routerMiddleware","store","configureStore","reducer","router","connectRouter","preloadedState","run","isLocalhost","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","log","onUpdate","onSuccess","catch","createHashHistory","document","addEventListener","ReactDOM","render","StrictMode","HTML5toTouch","CssBaseline","getElementById","URL","href","origin","fetch","headers","response","contentType","status","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.b11ef35e.chunk.js","sourcesContent":["import { useReducer } from 'react';\n\nconst SET = 'SET';\nconst RESET = 'RESET';\n\nconst formReducer = (state, action) => {\n  if (action.type === SET) {\n    return { ...state, [action.field]: action.payload };\n  }\n  if (action.type === RESET) {\n    return {};\n  }\n};\n\nfunction useForm(initialState = {}) {\n  const [state, dispatch] = useReducer(formReducer, initialState);\n\n  const updateField = ({ target }) =>\n    dispatch({\n      type: SET,\n      field: target.name,\n      payload: target.value,\n    });\n  const resetForm = () =>\n    dispatch({\n      type: RESET,\n    });\n  return { formState: state, updateField, resetForm };\n}\n\nexport default useForm;\n","import noop from 'lodash/noop';\nimport { createSlice } from '@reduxjs/toolkit';\nimport { createRoutine, promisifyRoutine } from 'redux-saga-routines';\n\nfunction createSliceWithRoutines({\n  name,\n  initialState = {},\n  reducers = {},\n  routines: routineInfo = {},\n  routineReducers = noop,\n  extraReducers = {},\n  ...otherArgs\n}) {\n  if (typeof routineReducers !== 'function') {\n    throw new Error('routineReducers must be a function that returns a reducerMap');\n  }\n  const routineNames = Object.keys(routineInfo);\n\n  const routines = routineNames.reduce((createdRoutines, routineName) => {\n    createdRoutines[routineName] = createRoutine(`${name}/${routineInfo[routineName]}`);\n    return createdRoutines;\n  }, {});\n\n  const promisifiedRoutines = routineNames.reduce((promisifiedRoutinesAcc, routineName) => {\n    const routine = routines[routineName];\n    promisifiedRoutinesAcc[routineName] = promisifyRoutine(routine);\n    return promisifiedRoutinesAcc;\n  }, {});\n  const slice = createSlice({\n    name,\n    reducers,\n    initialState,\n    extraReducers: {\n      ...extraReducers,\n      ...routineReducers(routines),\n    },\n    ...otherArgs,\n  });\n  slice.routines = routines;\n  slice.promisifiedRoutines = promisifiedRoutines;\n  return slice;\n}\nexport default createSliceWithRoutines;\n","import createSliceWithRoutines from \"redux-modules/utils/createSliceWithRoutines\";\n\nconst habitsSlice = createSliceWithRoutines({\n  name: \"habits\",\n  initialState: {},\n  reducers: {\n    updateHabit: (state, action) => {\n      const { habit, id } = action.payload;\n      state[id] = { ...state[id], ...habit };\n    },\n    addHabit: (state, action) => {\n      const { habit, id } = action.payload;\n      state[id] = habit;\n    },\n    deleteHabit: (state, action) => {\n      const { id } = action.payload;\n      delete state[id];\n    },\n  },\n  routines: {\n    updateHistory: \"UPDATE_HISTORY\",\n    createHabit: \"CREATE_HABIT\",\n    updateHabit: \"UPDATE_HABIT\",\n    deleteHabit: \"DELETE_HABIT\",\n    fetchHabit: \"FETCH_HABIT\",\n    swapHabit: \"SWAP_HABIT\",\n    reorderHabit: \"REORDER_HABIT\",\n  },\n  routineReducers: (routines) => ({\n    [routines.createHabit.SUCCESS]: (state, action) => {\n      const { habit, id } = action.payload;\n\n      state[id] = habit;\n    },\n  }),\n});\n\nexport default habitsSlice;\n","import habitsSlice from '../habitsSlice';\nimport { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\n\nconst { routines } = habitsSlice;\n\nfunction useCreateHabit() {\n  const dispatch = useDispatch();\n\n  const createUser = useCallback(\n    (formState) => {\n      const { habitName } = formState;\n      dispatch(routines.createHabit.trigger({ habitName }));\n    },\n    [dispatch]\n  );\n\n  return createUser;\n}\n\nexport default useCreateHabit;\n","const sessionSliceSelector = (state) => state?.session;\n\nexport default sessionSliceSelector;\n","import { createSelector } from '@reduxjs/toolkit';\nimport sessionSliceSelector from './sessionSliceSelector';\n\nconst isLoggedInSelector = createSelector(sessionSliceSelector, (sessionSlice) =>\n  Boolean(sessionSlice.user.uid)\n);\n\nexport default isLoggedInSelector;\n","import { useSelector } from 'react-redux';\nimport isLoggedInSelector from 'redux-modules/session/selectors/isLoggedInSelector';\n\nconst useLoggedIn = () => {\n  const isLoggedIn = useSelector(isLoggedInSelector);\n\n  return isLoggedIn;\n};\n\nexport default useLoggedIn;\n","import React, { useState, useCallback } from 'react';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport useForm from 'hooks/useForm';\nimport useCreateHabit from 'redux-modules/habits/hooks/useCreateHabit';\nimport useLoggedIn from 'hooks/useLoggedIn';\n\nexport default function FormDialog() {\n  const [open, setOpen] = useState(false);\n  const { formState, updateField, resetForm } = useForm();\n  const createHabit = useCreateHabit();\n  const isLoggedIn = useLoggedIn();\n\n  const handleClickOpen = useCallback(() => {\n    setOpen(true);\n  }, []);\n\n  const handleClose = useCallback(() => {\n    setOpen(false);\n  }, []);\n\n  if (!isLoggedIn) {\n    return null;\n  }\n\n  return (\n    <div>\n      <Button onClick={handleClickOpen}>Create Habit</Button>\n      <Dialog open={open} onClose={handleClose} aria-labelledby=\"create-habit-title\">\n        <DialogTitle id=\"create-habit-title\">Create Habit</DialogTitle>\n        <DialogContent>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"habitName\"\n            name=\"habitName\"\n            value={formState.habitName || ''}\n            onChange={updateField}\n            label=\"Habit Name\"\n            type=\"text\"\n            fullWidth\n            autoComplete=\"off\"\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}>Cancel</Button>\n          <Button\n            onClick={(e) => {\n              createHabit(formState);\n              resetForm();\n              handleClose();\n            }}\n          >\n            Create\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n","import { useCallback, useState } from 'react';\n\nfunction useToggle(defaultValue = false) {\n  const [toggle, setToggle] = useState(defaultValue);\n\n  const toggleValue = useCallback(() => {\n    setToggle(!toggle);\n  }, [toggle]);\n\n  return [toggle, toggleValue, setToggle];\n}\n\nexport default useToggle;\n","import createSliceWithRoutines from 'redux-modules/utils/createSliceWithRoutines';\n\nconst sessionSlice = createSliceWithRoutines({\n  name: 'session',\n  initialState: {\n    user: {},\n    userSettings: {\n      habitIds: [],\n      habitViewType: 'week'\n    },\n  },\n  reducers: {\n    setCurrentUser: (state, action) => {\n      state.user = action.payload.user;\n    },\n    setUserSettings: (state, action) => {\n      state.userSettings = { ...state.userSettings, ...action.payload.userSettings };\n    },\n  },\n  routines: {\n    login: 'LOGIN',\n    logout: 'LOGOUT',\n    createUser: 'CREATE_USER',\n    updateHabitViewType: 'UPDATE_HABIT_VIEW_TYPE',\n  },\n  routineReducers: (routines) => ({\n    [routines.logout.SUCCESS]: (state) => {\n      state.user = {};\n    },\n    [routines.login.SUCCESS]: (state, action) => {\n      state.user = action.payload.user;\n    },\n    [routines.createUser.SUCCESS]: (state, action) => {\n      state.user = action.payload.user;\n    },\n    [routines.updateHabitViewType.SUCCESS]: (state, action) => {\n      state.userSettings.habitViewType = action.payload.habitViewType;\n    }\n  }),\n});\n\nexport default sessionSlice;\n","import sessionSlice from '../sessionSlice';\nimport { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\n\nconst { routines } = sessionSlice;\n\nfunction useLogout() {\n  const dispatch = useDispatch();\n\n  const logout = useCallback(() => {\n    dispatch(routines.logout.trigger());\n  }, [dispatch]);\n\n  return logout;\n}\n\nexport default useLogout;\n","import React from 'react';\n// import useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { ThemeProvider as MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\nconst DEFAULT = 'dark'\n\nexport const useIsDarkTheme = () => {\n  return true;\n  // const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)');\n\n  // return prefersDarkMode;\n};\n\nfunction ThemeProvider({ children }) {\n  // const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)');\n\n  const theme = React.useMemo(\n    () =>\n      createMuiTheme({\n        palette: {\n          type: DEFAULT // prefersDarkMode ? 'dark' : 'light',\n        },\n      }),\n    []\n    // [prefersDarkMode]\n  );\n\n  return <MuiThemeProvider theme={theme}>{children}</MuiThemeProvider>;\n}\n\nexport default ThemeProvider;\n","import React, { useRef } from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\nimport CreateHabitDialog from 'ui/molecules/dialogs/CreateHabitDialog';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\n// import EventNoteIcon from '@material-ui/icons/EventNote';\nimport Grow from '@material-ui/core/Grow';\nimport IconButton from '@material-ui/core/IconButton';\n// import Drawer from 'ui/molecules/drawer/Drawer';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport MuiLink from '@material-ui/core/Link';\nimport MenuList from '@material-ui/core/MenuList';\n// import NotesIcon from '@material-ui/icons/Notes';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport useToggle from 'hooks/useToggle';\nimport useLogout from 'redux-modules/session/hooks/useLogout';\nimport useLoggedIn from 'hooks/useLoggedIn';\nimport { Link } from 'react-router-dom';\nimport { useIsDarkTheme } from '../themeProvider/ThemeProvider';\nimport { css } from 'emotion';\nimport { getDate } from 'date-fns';\n\nconst currentDay = () => {\n  return `${getDate(Date.now())}`.padStart(2, '0');\n};\n\nconst calendarStyles = css`\n  position: relative;\n  ::after {\n    content: '${currentDay()}';\n    position: absolute;\n    left: 10px;\n    top: 10px;\n  }\n`;\n\nconst linkStyles = css`\n  a {\n    color: inherit;\n    text-decoration: none;\n    &:hover {\n      text-decoration: none;\n    }\n  }\n`;\n\nconst NavBar = (props) => {\n  const [toggle, toggleState] = useToggle();\n  const openMenuRef = useRef();\n\n  const isLoggedIn = useLoggedIn();\n  const logout = useLogout();\n\n  const isDarkTheme = useIsDarkTheme();\n\n  return (\n    <AppBar color={isDarkTheme ? 'inherit' : 'primary'} position=\"sticky\">\n      <Toolbar\n        style={{\n          display: 'flex',\n          flexDirection: 'row',\n          justifyContent: 'center',\n          alignItems: 'center',\n        }}\n      >\n        {/* TODO: notes tab */}\n        {/* <Drawer>\n          <Link style={{ color: 'inherit', textDecoration: 'none' }} to=\"/\">\n            <Drawer.ListItem text=\"Habits\" icon={EventNoteIcon} />\n          </Link>\n          <Link style={{ color: 'inherit', textDecoration: 'none' }} to=\"/notes\">\n            <Drawer.ListItem text=\"Notes\" icon={NotesIcon} />\n          </Link>\n        </Drawer> */}\n        <Typography variant=\"h6\" noWrap>\n          <Link style={{ color: 'inherit', textDecoration: 'none' }} to=\"/\">\n            Habit Tracker\n          </Link>\n        </Typography>\n        <div\n          style={{\n            flexGrow: 1,\n            maxWidth: '960px',\n          }}\n        />\n        <CreateHabitDialog />\n        <div className={calendarStyles}>\n          <CalendarTodayIcon fontSize=\"large\" />\n        </div>\n        <IconButton\n          edge=\"end\"\n          aria-label=\"account of current user\"\n          ref={openMenuRef}\n          onClick={toggleState}\n          aria-haspopup=\"true\"\n          color=\"inherit\"\n        >\n          <AccountCircle />\n        </IconButton>\n        <Popper open={toggle} anchorEl={openMenuRef.current} transition>\n          {({ TransitionProps, placement }) => {\n            return (\n              <Grow\n                {...TransitionProps}\n                style={{\n                  transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                }}\n              >\n                <Paper>\n                  <ClickAwayListener onClickAway={toggleState}>\n                    <>\n                      {!isLoggedIn && (\n                        <MenuList\n                          autoFocusItem={toggle}\n                          id=\"menu-list-grow\"\n                          onKeyDown={toggleState}\n                          className={linkStyles}\n                        >\n                          <MenuItem onClick={toggleState}>\n                            <Link component={MuiLink} to=\"/signin\">\n                              Login\n                            </Link>\n                          </MenuItem>\n                          {process.env.NODE_ENV !== 'production' && (\n                            <MenuItem onClick={toggleState}>\n                              <Link component={MuiLink} to=\"/signup\">\n                                Sign Up\n                              </Link>\n                            </MenuItem>\n                          )}\n                        </MenuList>\n                      )}\n                      {isLoggedIn && (\n                        <MenuList\n                          autoFocusItem={toggle}\n                          id=\"menu-list-grow\"\n                          onKeyDown={toggleState}\n                          className={linkStyles}\n                        >\n                          {/* <MenuItem onClick={toggleState}>\n                            <Link component={MuiLink} to=\"/profile\">\n                              Profile\n                            </Link>\n                          </MenuItem>\n                          <MenuItem onClick={toggleState}>My account</MenuItem> */}\n                          <MenuItem\n                            onClick={() => {\n                              logout();\n                              toggleState();\n                            }}\n                          >\n                            Logout\n                          </MenuItem>\n                        </MenuList>\n                      )}\n                    </>\n                  </ClickAwayListener>\n                </Paper>\n              </Grow>\n            );\n          }}\n        </Popper>\n      </Toolbar>\n    </AppBar>\n  );\n};\n\nexport default NavBar;\n","import sessionSlice from '../sessionSlice';\nimport { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\n\nconst { routines } = sessionSlice;\n\nfunction useLogin() {\n  const dispatch = useDispatch();\n\n  const login = useCallback(\n    (loginInfo) => {\n      dispatch(routines.login.trigger(loginInfo));\n    },\n    [dispatch]\n  );\n\n  return login;\n}\n\nexport default useLogin;\n","import React, { useCallback, SyntheticEvent, FunctionComponent } from 'react';\nimport useForm from 'hooks/useForm';\nimport { Link } from 'react-router-dom';\nimport { Button, TextField } from '@material-ui/core';\nimport { css, cx } from 'emotion';\nimport useLogin from 'redux-modules/session/hooks/useLogin';\n\nconst formStyles = css`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  > * {\n    margin: 5px;\n  }\n`;\n\ntype SignInProps = {\n  className?: string | undefined;\n};\n\nconst SignIn: FunctionComponent<SignInProps> = ({ className }) => {\n  const { formState, updateField } = useForm();\n  const login = useLogin();\n\n  const onSubmit = useCallback(\n    (event: SyntheticEvent) => {\n      event.preventDefault();\n      event.stopPropagation();\n      login(formState);\n    },\n    [formState, login]\n  );\n\n  return (\n    <div>\n      <form onSubmit={onSubmit} className={cx(formStyles, className)}>\n        Sign In\n        <TextField\n          type=\"email\"\n          label=\"Email Address\"\n          value={formState.email || ''}\n          name=\"email\"\n          placeholder=\"Email Address\"\n          onChange={updateField}\n        />\n        <TextField\n          type=\"password\"\n          label=\"Password\"\n          required\n          name=\"password\"\n          value={formState.password || ''}\n          placeholder=\"Your Password\"\n          onChange={updateField}\n        />\n        <Button variant=\"contained\" color=\"primary\" type=\"submit\">\n          Sign in\n        </Button>\n        <Link to=\"/signup\">Sign up here</Link>\n        <Link to=\"/passwordreset\">Forgot Password?</Link>\n      </form>\n    </div>\n  );\n};\n\nexport default SignIn;\n","import sessionSlice from '../sessionSlice';\nimport { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\n\nconst { routines } = sessionSlice;\n\nfunction useCreateUser() {\n  const dispatch = useDispatch();\n\n  const createUser = useCallback(\n    (userInfo) => {\n      const { displayName, email, password } = userInfo;\n      dispatch(routines.createUser.trigger({ displayName, email, password }));\n    },\n    [dispatch]\n  );\n\n  return createUser;\n}\n\nexport default useCreateUser;\n","import React, { useCallback, SyntheticEvent, FunctionComponent } from 'react';\nimport useForm from 'hooks/useForm';\nimport { Link } from 'react-router-dom';\nimport { Button, TextField } from '@material-ui/core';\nimport { css, cx } from 'emotion';\nimport useCreateUser from 'redux-modules/session/hooks/useCreateUser';\nconst formStyles = css`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  > * {\n    margin: 10px;\n  }\n`;\n\ntype SignUpProps = {\n  className?: string | undefined;\n};\n\nconst SignUp: FunctionComponent<SignUpProps> = ({ className }) => {\n  const { formState, updateField } = useForm();\n\n  const createUser = useCreateUser();\n\n  const onSubmit = useCallback(\n    (event: SyntheticEvent) => {\n      event.preventDefault();\n      event.stopPropagation();\n      createUser(formState);\n    },\n    [createUser, formState]\n  );\n\n  return (\n    <div>\n      <form onSubmit={onSubmit} className={cx(formStyles, className)}>\n        Sign Up\n        <TextField\n          type=\"text\"\n          label=\"Display Name\"\n          value={formState.displayName || ''}\n          name=\"displayName\"\n          placeholder=\"Display Name\"\n          onChange={updateField}\n          required\n        />\n        <TextField\n          type=\"email\"\n          label=\"Email Address\"\n          value={formState.email || ''}\n          name=\"email\"\n          placeholder=\"Email Address\"\n          onChange={updateField}\n          required\n        />\n        <TextField\n          type=\"password\"\n          label=\"Password\"\n          required\n          name=\"password\"\n          value={formState.password || ''}\n          placeholder=\"Your Password\"\n          onChange={updateField}\n        />\n        <Button variant=\"contained\" color=\"primary\" type=\"submit\">\n          Sign Up\n        </Button>\n        <Link to=\"/signin\">Sign in here</Link>\n        <Link to=\"/passwordreset\">Forgot Password?</Link>\n      </form>\n    </div>\n  );\n};\n\nexport default SignUp;\n","import React from 'react';\n\nfunction ProfilePage() {\n  return <div></div>;\n}\n\nexport default ProfilePage;\n","import firebase from 'firebase/app';\nimport 'firebase/auth';\nimport { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport sessionSlice from 'redux-modules/session/sessionSlice';\n\nfunction useAuthPersistence() {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    firebase.auth().onAuthStateChanged((userAuth) => {\n      dispatch(sessionSlice.actions.setCurrentUser({ user: userAuth || {} }));\n    });\n  }, [dispatch]);\n}\n\nexport default useAuthPersistence;\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport useLoggedIn from 'hooks/useLoggedIn';\n\nfunction AuthRoute({ path, children }) {\n  const isLoggedIn = useLoggedIn();\n\n  if (!isLoggedIn) {\n    return <Redirect to={'/'} />;\n  }\n\n  return <Route path={path}>{children}</Route>;\n}\n\nexport default AuthRoute;\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport useLoggedIn from 'hooks/useLoggedIn';\n\nfunction UnAuthRoute({ path, children }) {\n  const isLoggedIn = useLoggedIn();\n\n  if (isLoggedIn) {\n    return <Redirect to={'/'} />;\n  }\n\n  return <Route path={path}>{children}</Route>;\n}\n\nexport default UnAuthRoute;\n","import get from 'lodash/get';\nimport sessionSliceSelector from 'redux-modules/session/selectors/sessionSliceSelector';\nimport { createSelector } from '@reduxjs/toolkit';\n\nconst habitIdsSelector = createSelector([sessionSliceSelector], (session) =>\n  get(session, 'userSettings.habitIds', [])\n);\n\nexport default habitIdsSelector;\n","import { useSelector } from 'react-redux';\nimport habitIdsSelector from '../selectors/habitIdsSelectors';\n\nconst useHabitIds = () => {\n  const habitIds = useSelector(habitIdsSelector);\n\n  return habitIds;\n};\n\nexport default useHabitIds;\n","import { getDay, getDaysInMonth, getWeekOfMonth } from 'date-fns';\n\nconst SATURDAY = 6;\n\nfunction calculateWeeksInMonth({ month, year }) {\n  // month is 0-indexed\n  const numDaysInMonth = getDaysInMonth(new Date(year, month));\n  // 0 Sun, 1 Mon, etc.\n  const firstDayOfMonth = getDay(new Date(year, month, 1));\n\n  const weekNumForToday = getWeekOfMonth(new Date()) - 1\n\n  const weeks = [];\n  let currentDay = 1;\n\n  while (currentDay <= numDaysInMonth) {\n    const week = [];\n\n    if (weeks.length === 0) {\n      // build first week\n      for (let i = 0; i <= SATURDAY; i++) {\n        if (i < firstDayOfMonth) {\n          week.push(-1);\n        } else {\n          week.push(currentDay);\n          currentDay++;\n        }\n      }\n    } else {\n      for (let i = 0; i <= SATURDAY; i++) {\n        if (currentDay <= numDaysInMonth) {\n          week.push(currentDay);\n        } else {\n          week.push(-1);\n        }\n        currentDay++;\n      }\n    }\n    weeks.push(week);\n  }\n\n  return [weeks, weekNumForToday];\n}\n\nexport default calculateWeeksInMonth;\n","import React from 'react';\nimport noop from 'lodash/noop';\nimport { css, cx } from 'emotion';\nimport { useIsDarkTheme } from 'ui/atoms/themeProvider/ThemeProvider';\n\nconst dayContainerStyles = css`\n  display: flex;\n  flex-direction: row;\n`;\n\nconst clickableStyles = css`\n  &:hover {\n    cursor: pointer;\n    background-color: rgb(180, 180, 180);\n  }\n`;\n\nconst dayStyles = css`\n  height: 30px;\n  width: 30px;\n  border-radius: 5px;\n  background-color: rgb(220, 220, 220);\n  margin: 5px;\n`;\n\nconst activeStyles = css`\n  background-color: rgb(51, 192, 255);\n  &:hover {\n    background-color: rgb(51, 192, 255, 0.5);\n  }\n`;\n\nconst darkThemeStyles = css`\n  background-color: #282d33;\n  color: white;\n`;\n\nconst darkActiveStyles = css`\n  background-color: gray;\n  &:hover {\n    opacity: 0.5;\n  }\n`;\n\nfunction Week({ week = [], onDayClick, history }) {\n  const isDarkTheme = useIsDarkTheme();\n\n  return (\n    <div className={cx(dayContainerStyles)}>\n      {week.map((day, idx) => {\n        const onClick = day > 0 ? () => onDayClick && onDayClick(day) : noop;\n\n        const className = cx(\n          dayStyles,\n          isDarkTheme && darkThemeStyles,\n          day > 0 && clickableStyles,\n          history[day] && !isDarkTheme && activeStyles,\n          history[day] && isDarkTheme && darkActiveStyles\n        );\n        return (\n          <div key={`${day}-${idx}`} className={className} onClick={onClick}>\n            {day > 0 ? day : ''}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\nexport default Week;\n","function habitsSliceSelector(state) {\n  return state.habits;\n}\nexport default habitsSliceSelector;\n","import { createSelector } from '@reduxjs/toolkit';\nimport habitsSliceSelector from './habitsSliceSelector';\n\nconst habitSelector = (habitId) =>\n  createSelector([habitsSliceSelector], (habits) => habits[habitId]);\n\nexport default habitSelector;\n","import { useSelector } from 'react-redux';\nimport habitSelector from '../selectors/habitSelector';\n\nconst useHabit = (habitId) => {\n  const habit = useSelector(habitSelector(habitId));\n\n  return habit;\n};\n\nexport default useHabit;\n","import React, { useMemo, useCallback } from \"react\";\nimport get from \"lodash/get\";\nimport habitsSlice from \"redux-modules/habits/habitsSlice\";\nimport calculateWeeksInMonth from \"./calculateWeeksInMonth\";\nimport Week from \"./Week\";\nimport { useDispatch } from \"react-redux\";\nimport useHabit from \"redux-modules/habits/hooks/useHabit\";\n\nfunction Calendar({ month, year, habitId, habitViewType }) {\n  const [weeks, weekNumForToday] = useMemo(\n    () => calculateWeeksInMonth({ month, year }),\n    [month, year],\n  );\n  const dispatch = useDispatch();\n\n  const onDayClick = useCallback(\n    (day) => {\n      dispatch(\n        habitsSlice.routines.updateHistory.trigger({\n          day,\n          month,\n          year,\n          habitId,\n        }),\n      );\n    },\n    [dispatch, habitId, month, year],\n  );\n\n  const { history = {} } = useHabit(habitId);\n\n  if (habitViewType === \"week\") {\n    const week = weeks[weekNumForToday];\n    // console.log(week)\n    return (\n      <div>\n        <Week\n          week={week}\n          key={weekNumForToday}\n          onDayClick={onDayClick}\n          history={get(history, [year, month], {})}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {weeks.map((week, idx) => {\n        return (\n          <Week\n            week={week}\n            key={idx}\n            onDayClick={onDayClick}\n            history={get(history, [year, month], {})}\n          />\n        );\n      })}\n    </div>\n  );\n}\n\nexport default Calendar;\n","import React, { useCallback, useState } from 'react';\nimport { getMonth, getYear } from 'date-fns';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBackIos';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForwardIos';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport { css } from 'emotion';\n\nconst monthNavContainerStyles = css`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst navStyles = css`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n`;\n\nconst Months = [\n  { name: 'January' },\n  { name: 'February' },\n  { name: 'March' },\n  { name: 'April' },\n  { name: 'May' },\n  { name: 'June' },\n  { name: 'July' },\n  { name: 'August' },\n  { name: 'September' },\n  { name: 'October' },\n  { name: 'November' },\n  { name: 'December' },\n];\n\nfunction MonthNav({\n  children,\n  currentMonth = getMonth(Date.now()),\n  currentYear = getYear(Date.now()),\n  showMonthNavButtons = true\n}) {\n  const [month, setMonth] = useState(currentMonth);\n  const [year, setYear] = useState(currentYear);\n  const [notesOpen, setNotesOpen] = useState(false);\n\n  const toggleNotes = () => {\n    setNotesOpen(!notesOpen)\n  }\n\n  const navigateBackwards = useCallback(() => {\n    let newMonth = month - 1;\n    if (newMonth < 0) {\n      newMonth = 11;\n      let newYear = year - 1;\n      setYear(newYear);\n    }\n    setMonth(newMonth);\n  }, [month, year]);\n\n  const navigateForwards = useCallback(() => {\n    let newMonth = month + 1;\n    if (newMonth > 11) {\n      newMonth = 0;\n      let newYear = year + 1;\n      setYear(newYear);\n    }\n    setMonth(newMonth);\n  }, [month, year]);\n\n  return (\n    <div className={monthNavContainerStyles}>\n      <div className={navStyles}>\n        <div className={navStyles}>\n          {showMonthNavButtons &&\n            <>\n              <IconButton size=\"small\" onClick={navigateBackwards}>\n                <ArrowBackIcon />\n              </IconButton>\n              <IconButton size=\"small\" onClick={navigateForwards}>\n                <ArrowForwardIcon />\n              </IconButton>\n            </>\n          }\n          <Typography variant=\"h6\" noWrap>\n            {Months[month].name} {year}\n          </Typography>\n        </div>\n        <IconButton size=\"small\" onClick={toggleNotes}>\n          {notesOpen ?\n            <KeyboardArrowUpIcon /> :\n            <KeyboardArrowDownIcon />\n          }\n        </IconButton>\n      </div>\n      <div>{children({ month, year, notesOpen })}</div>\n    </div>\n  );\n}\n\nexport default MonthNav;\n","import habitsSlice from '../habitsSlice';\nimport { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\n\nconst { routines } = habitsSlice;\n\nfunction useDeleteHabit(habitId) {\n  const dispatch = useDispatch();\n\n  const deleteHabit = useCallback(() => {\n    dispatch(routines.deleteHabit.trigger({ habitId }));\n  }, [dispatch, habitId]);\n\n  return deleteHabit;\n}\n\nexport default useDeleteHabit;\n","import habitsSlice from '../habitsSlice';\nimport { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\n\nconst { routines } = habitsSlice;\n\nfunction useUpdateHabit() {\n  const dispatch = useDispatch();\n\n  const updateHabit = useCallback(\n    ({ id, habit }) => {\n      dispatch(routines.updateHabit.trigger({ id, habit }));\n    },\n    [dispatch]\n  );\n\n  return updateHabit;\n}\n\nexport default useUpdateHabit;\n","import React, { FunctionComponent } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport TextField from '@material-ui/core/TextField';\nimport useForm from 'hooks/useForm';\nimport useHabit from 'redux-modules/habits/hooks/useHabit';\nimport useUpdateHabit from 'redux-modules/habits/hooks/useUpdateHabit';\n\ntype RenameHabitDialogProps = {\n  habitId: string;\n  isOpen: boolean;\n  setIsRenameOpen: Function;\n};\n\nconst RenameHabitDialog: FunctionComponent<RenameHabitDialogProps> = ({\n  habitId,\n  isOpen,\n  setIsRenameOpen,\n}) => {\n  const habit: { name: string; history: object | undefined } = useHabit(habitId);\n  const { formState, updateField, resetForm } = useForm();\n  const updateHabit = useUpdateHabit();\n  return (\n    <Dialog open={isOpen} onClose={() => setIsRenameOpen(false)} aria-labelledby=\"update-dialog\">\n      <DialogTitle id=\"update-dialog\">Update Habit Name - {habit.name}</DialogTitle>\n      <DialogContent>\n        <TextField\n          autoFocus\n          margin=\"dense\"\n          id=\"habitName\"\n          name=\"habitName\"\n          value={formState.habitName || ''}\n          onChange={updateField}\n          label=\"Habit Name\"\n          type=\"text\"\n          fullWidth\n          autoComplete=\"off\"\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={() => setIsRenameOpen(false)} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={(e) => {\n            updateHabit({ id: habitId, habit: { name: formState.habitName } });\n            resetForm();\n            setIsRenameOpen(false);\n          }}\n          color=\"primary\"\n        >\n          Update Name\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default RenameHabitDialog;\n","import habitsSlice from \"../habitsSlice\";\nimport { useCallback } from \"react\";\nimport { useDispatch } from \"react-redux\";\n\nconst { routines } = habitsSlice;\n\nfunction useReorderHabit() {\n  const dispatch = useDispatch();\n\n  const reorderHabit = useCallback(\n    ({ habitId, newPosition }) => {\n      dispatch(routines.reorderHabit.trigger({ habitId, newPosition }));\n    },\n    [dispatch],\n  );\n\n  return reorderHabit;\n}\n\nexport default useReorderHabit;\n","import { useSelector } from \"react-redux\";\nimport habitsSliceSelector from \"../selectors/habitsSliceSelector\";\n\nconst useHabits = () => {\n  const habits = useSelector(habitsSliceSelector);\n\n  return habits;\n};\n\nexport default useHabits;\n","import React, { FunctionComponent } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport useForm from \"hooks/useForm\";\nimport useReorderHabit from \"redux-modules/habits/hooks/useReorderHabit\";\nimport useHabitIds from \"redux-modules/habits/hooks/useHabitIds\";\nimport { InputLabel, Select } from \"@material-ui/core\";\nimport useHabits from \"redux-modules/habits/hooks/useHabits\";\n\ntype ReorderHabitDialogProps = {\n  habitId: string;\n  isOpen: boolean;\n  setIsReorderOpen: Function;\n};\n\nconst ReorderHabitDialog: FunctionComponent<ReorderHabitDialogProps> = ({\n  habitId,\n  isOpen,\n  setIsReorderOpen,\n}) => {\n  const habits = useHabits();\n  const habit = habits[habitId];\n  // habitIds has the correct order, don't use order based on useHabits()\n  const habitsIds = useHabitIds();\n  const { formState, updateField, resetForm } = useForm();\n  const reorderHabit = useReorderHabit();\n\n  const currentPositionIdx = habitsIds.indexOf(habitId);\n  return (\n    <Dialog\n      open={isOpen}\n      onClose={() => setIsReorderOpen(false)}\n      aria-labelledby=\"update-dialog\"\n    >\n      <DialogTitle id=\"update-dialog\">Update Order - {habit.name}</DialogTitle>\n      <DialogContent>\n        <InputLabel>Current Position: {currentPositionIdx + 1}</InputLabel>\n        <Select\n          id=\"habitPosition\"\n          name=\"habitPosition\"\n          value={formState.habitPosition || currentPositionIdx}\n          onChange={updateField}\n          fullWidth\n        >\n          {habitsIds.map((id: string, idx: number) => {\n            const k = `select-${habitId}-menu-item-${id}`;\n            return (\n              <MenuItem key={k} value={idx} id={k}>\n                Position {idx + 1}: {habits[id]?.name}\n              </MenuItem>\n            );\n          })}\n        </Select>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={() => setIsReorderOpen(false)} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={(e) => {\n            reorderHabit({ habitId, newPosition: formState.habitPosition });\n            resetForm();\n            setIsReorderOpen(false);\n          }}\n          color=\"primary\"\n        >\n          Update Position\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default ReorderHabitDialog;\n","import React, { FunctionComponent } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\ntype DeleteHabitDialogProps = {\n  isOpen: boolean;\n  deleteHabit: Function;\n  closeDialog: Function;\n};\n\nconst DeleteHabitDialog: FunctionComponent<DeleteHabitDialogProps> = ({\n  isOpen,\n  deleteHabit,\n  closeDialog,\n}) => {\n  return (\n    <Dialog\n      open={isOpen}\n      onClose={() => {\n        closeDialog();\n      }}\n      aria-labelledby=\"update-dialog\"\n    >\n      <DialogTitle id=\"update-dialog\">Delete Habit</DialogTitle>\n      <DialogContent>Are you sure you want to delete this habit?</DialogContent>\n      <DialogActions>\n        <Button\n          onClick={() => {\n            closeDialog();\n          }}\n        >\n          Cancel\n        </Button>\n        <Button\n          onClick={(e) => {\n            deleteHabit();\n            closeDialog();\n          }}\n        >\n          Delete\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default DeleteHabitDialog;\n","import React, {\n  FunctionComponent,\n  useState,\n  useRef,\n  MutableRefObject,\n} from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport useDeleteHabit from \"redux-modules/habits/hooks/useDeleteHabit\";\nimport useHabit from \"redux-modules/habits/hooks/useHabit\";\nimport RenameHabitDialog from \"../dialogs/RenameHabitDialog\";\nimport ReorderHabitDialog from \"../dialogs/ReorderHabitDialog\";\nimport DeleteHabitDialog from \"../dialogs/DeleteHabitDialog\";\n\ntype HabitOptionProps = {\n  habitId: string;\n};\n\nconst HabitOptions: FunctionComponent<HabitOptionProps> = ({ habitId }) => {\n  const habit: { name: string; history: object | undefined } =\n    useHabit(habitId);\n\n  const iconButtonRef = useRef() as MutableRefObject<HTMLButtonElement>;\n\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n  const openOptions = () => setIsOpen(true);\n  const closeOptions = () => setIsOpen(false);\n\n  const [renameOpen, setIsRenameOpen] = useState(false);\n  const [reorderOpen, setIsReorderOpen] = useState(false);\n  const [deleteOpen, setIsDeleteOpen] = useState(false);\n\n  const deleteHabit = useDeleteHabit(habitId);\n\n  if (!habit) {\n    return null;\n  }\n  return (\n    <>\n      <IconButton\n        ref={iconButtonRef}\n        edge=\"end\"\n        aria-label=\"options for habit\"\n        onClick={openOptions}\n      >\n        <MoreVertIcon />\n      </IconButton>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={iconButtonRef.current}\n        keepMounted\n        open={isOpen}\n        onClose={closeOptions}\n      >\n        <MenuItem\n          onClick={() => {\n            setIsRenameOpen(true);\n            closeOptions();\n          }}\n        >\n          Rename\n        </MenuItem>{\" \"}\n        <MenuItem\n          onClick={() => {\n            setIsReorderOpen(true);\n            closeOptions();\n          }}\n        >\n          Reorder\n        </MenuItem>\n        <MenuItem\n          onClick={() => {\n            setIsDeleteOpen(true);\n            closeOptions();\n          }}\n        >\n          Delete\n        </MenuItem>\n      </Menu>\n      <RenameHabitDialog\n        isOpen={renameOpen}\n        habitId={habitId}\n        setIsRenameOpen={setIsRenameOpen}\n      />\n      <ReorderHabitDialog\n        isOpen={reorderOpen}\n        habitId={habitId}\n        setIsReorderOpen={setIsReorderOpen}\n      />\n      <DeleteHabitDialog\n        isOpen={deleteOpen}\n        deleteHabit={deleteHabit}\n        closeDialog={() => setIsDeleteOpen(false)}\n      />\n    </>\n  );\n};\n\nexport default HabitOptions;\n","import habitsSlice from '../habitsSlice';\nimport { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\n\nconst { routines } = habitsSlice;\n\nfunction useSwapHabit() {\n  const dispatch = useDispatch();\n\n  const swapHabit = useCallback(\n    ({ firstHabitId, secondHabitId }) => {\n      dispatch(routines.swapHabit.trigger({ firstHabitId, secondHabitId }));\n    },\n    [dispatch]\n  );\n\n  return swapHabit;\n}\n\nexport default useSwapHabit;\n","import React, { FunctionComponent } from 'react';\nimport { useDrop } from 'react-dnd';\nimport { HabitDragItem } from './Habit';\nimport { css, cx } from 'emotion';\nimport useSwapHabit from 'redux-modules/habits/hooks/useSwapHabit';\n\nconst hoveringStyles = css`\n  opacity: 0.8;\n`;\n\nconst canDropStyles = css`\n  opacity: 0.5;\n`;\n\ntype Props = {\n  habitId: string;\n};\n\nconst HabitDropZone: FunctionComponent<Props> = (props) => {\n  const { habitId } = props;\n  const swapHabit = useSwapHabit();\n  const [dropCollectedProps, drop] = useDrop({\n    accept: 'habit',\n    canDrop: (item: HabitDragItem) => {\n      return item.type === 'habit' && item.id !== habitId;\n    },\n    drop: (item: HabitDragItem, monitor) => {\n      const { id: droppedItemId, type: droppedItemType } = item;\n      if (droppedItemType === 'habit') {\n        // habit dropped, dispatch action to reorder habits\n        swapHabit({ firstHabitId: droppedItemId, secondHabitId: habitId });\n      }\n    },\n    collect: (monitor) => ({\n      canDrop: monitor.canDrop(),\n      isHovering: monitor.isOver(),\n    }),\n  });\n\n  return (\n    <div\n      ref={drop}\n      className={cx({\n        [canDropStyles]: dropCollectedProps.canDrop,\n        [hoveringStyles]: dropCollectedProps.isHovering && dropCollectedProps.canDrop,\n      })}\n    >\n      {props.children}\n    </div>\n  );\n};\n\nexport default HabitDropZone;\n","import React, { FunctionComponent, useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize';\nimport useForm from 'hooks/useForm';\nimport { css } from 'emotion';\n\nconst formStyles: string = css`\n  display: flex;\n  flex-direction: column;\n`\nconst buttonContainerStyles: string = css`\n  display: flex;\n  flex-direction: row;\n`\nconst preStyles: string = css`\n  padding: 0.75rem;\n  border-radius: 0.5rem;\n  border: 1px solid black;\n`\n\nconst textAreaStyles = css`\n  padding: 0.75rem;\n  border-radius: 0.5rem;\n  border: 1px solid black;\n  outline: none;\n`\n\ntype Props = {\n  notes: string;\n  notesOpen: boolean;\n  updateNotes?: (notes: string) => any;\n}\n\nconst HabitNotes: FunctionComponent<Props> = ({ notes, notesOpen, updateNotes }) => {\n  const [editNotes, setEditNotes] = useState(false)\n  const { formState, updateField, resetForm } = useForm();\n\n  const toggleEditNotes = () => {\n    setEditNotes(!editNotes)\n  }\n\n  if (!notesOpen) {\n    return null;\n  }\n\n  if (!editNotes) {\n    return <pre className={preStyles} onClick={toggleEditNotes}>{notes.length ? notes : 'No Notes'}</pre>\n  }\n  return (\n    <div className={formStyles}>\n      <TextareaAutosize\n        className={textAreaStyles}\n        autoFocus\n        id=\"notes\"\n        name=\"notes\"\n        value={formState.notes ?? notes ?? ''}\n        onChange={updateField}\n        autoComplete=\"off\"\n      />\n      <div className={buttonContainerStyles}>\n        <Button onClick={() => setEditNotes(false)} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={(e) => {\n            updateNotes && updateNotes(formState.notes)\n            resetForm();\n            setEditNotes(false);\n          }}\n          color=\"primary\"\n        >Update</Button>\n      </div>\n    </div>\n  );\n}\n\nexport default HabitNotes;","import React, { FunctionComponent } from 'react';\nimport Calendar from 'ui/molecules/calendar/Calendar';\nimport Card from '@material-ui/core/Card';\nimport DragIndicatorIcon from '@material-ui/icons/DragIndicator';\nimport IconButton from '@material-ui/core/IconButton';\nimport MonthNav from 'ui/molecules/calendar/MonthNav';\nimport Typography from '@material-ui/core/Typography';\nimport useHabit from 'redux-modules/habits/hooks/useHabit';\nimport { css } from 'emotion';\nimport { useDrag } from 'react-dnd';\nimport HabitOptions from './HabitOptions';\nimport HabitDropZone from './HabitDropZone';\nimport HabitNotes from './HabitNotes';\nimport useUpdateHabit from 'redux-modules/habits/hooks/useUpdateHabit';\n\nconst cardStyles: string = css`\n  margin: 8px;\n  padding: 16px;\n  text-transform: capitalize;\n  position: relative;\n`;\n\nconst fillerStyles: string = css`\n  flex-grow: 1;\n`;\n\nconst cardHeaderStyles: string = css`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`;\n\nconst titleStyles: string = css`\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 18ch;\n`;\n\ntype HabitProps = {\n  habitId: string;\n  order: number;\n  habitViewType: 'week' | 'month'\n};\n\nexport type HabitDragItem = {\n  type: string;\n  id: string;\n  order: number;\n};\n\ntype HabitType = {\n  name: string;\n  history: object | undefined;\n  notes: string | undefined\n}\n\nconst Habit: FunctionComponent<HabitProps> = ({ habitId, order, habitViewType }) => {\n  const habit: HabitType = useHabit(habitId);\n\n  const [, drag, preview] = useDrag({\n    item: { id: habitId, type: 'habit', order },\n  });\n\n  const updateHabit = useUpdateHabit()\n\n  const updateNotes = (notes: string) => {\n    updateHabit({ id: habitId, habit: { notes } })\n  }\n\n  if (!habit) {\n    return null;\n  }\n  const { name, notes } = habit;\n  return (\n    <HabitDropZone habitId={habitId}>\n      <Card className={cardStyles} ref={preview}>\n        <div className={cardHeaderStyles}>\n          <IconButton\n            ref={drag}\n            edge=\"start\"\n            aria-label=\"drag drop indicator for reordering habits\"\n          >\n            <DragIndicatorIcon />\n          </IconButton>\n          <Typography variant=\"h6\" className={titleStyles}>\n            {name}\n          </Typography>\n          <div className={fillerStyles} />\n          <HabitOptions habitId={habitId} />\n        </div>\n        <MonthNav showMonthNavButtons={habitViewType === 'month'}>\n          {({ month, year, notesOpen }: { month: number; year: number; notesOpen: boolean }) => (\n            <>\n              <HabitNotes notes={notes ?? ''} notesOpen={notesOpen} updateNotes={updateNotes} />\n              <Calendar month={month} year={year} habitId={habitId} habitViewType={habitViewType} />\n            </>\n          )}\n        </MonthNav>\n      </Card>\n    </HabitDropZone>\n  );\n};\n\nexport default Habit;\n","import sessionSlice from '../sessionSlice';\nimport { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\n\nconst { routines } = sessionSlice;\n\nfunction useUpdateHabitViewType() {\n  const dispatch = useDispatch();\n\n  const updateHabitViewType = useCallback(\n    (info) => {\n      const { habitViewType } = info;\n      dispatch(routines.updateHabitViewType.trigger({ habitViewType }));\n    },\n    [dispatch]\n  );\n\n  return updateHabitViewType;\n}\n\nexport default useUpdateHabitViewType;\n\n","import { createSelector } from '@reduxjs/toolkit';\nimport get from 'lodash/get';\nimport sessionSliceSelector from './sessionSliceSelector';\n\nconst habitViewTypeSelector = createSelector(sessionSliceSelector, (session) => {\n  return get(session, 'userSettings.habitViewType', 'week');\n});\n\nexport default habitViewTypeSelector;\n","import { useSelector } from 'react-redux';\nimport habitViewTypeSelector from '../selectors/habitViewTypeSelector';\n\nconst useHabitViewType = () => {\n  const habit = useSelector(habitViewTypeSelector);\n\n  return habit;\n};\n\nexport default useHabitViewType;\n","import React, { FunctionComponent } from 'react';\nimport useHabitIds from 'redux-modules/habits/hooks/useHabitIds';\nimport Habit from '../habit/Habit';\nimport { css } from 'emotion';\nimport { Flipper, Flipped } from 'react-flip-toolkit';\nimport useUpdateHabitViewType from 'redux-modules/session/hooks/useUpdateHabitView';\nimport useHabitViewType from 'redux-modules/session/hooks/useHabitViewType';\n\nconst HABIT_VIEW_TYPE = {\n  week: 'week',\n  month: 'month',\n}\n\nconst habitContainerStyles = css`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  max-width: 1000px;\n  align-items: center;\n  @media only screen and (max-width: 1000px) {\n    justify-content: center;\n  }\n`;\n\nconst weekHabitContainerStyles = css`\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  max-width: 1000px;\n  align-items: center;\n  @media only screen and (max-width: 1000px) {\n    justify-content: center;\n  }\n`;\n\nconst useToggleHabitViewType = () => {\n  const habitViewType = useHabitViewType()\n\n  const updateHabitViewType = useUpdateHabitViewType()\n  const toggleHabitViewType = () => {\n    if (habitViewType === HABIT_VIEW_TYPE.month) {\n      updateHabitViewType({ habitViewType: HABIT_VIEW_TYPE.week })\n    }\n    else {\n      updateHabitViewType({ habitViewType: HABIT_VIEW_TYPE.month })\n    }\n  }\n\n  return { habitViewType, toggleHabitViewType }\n}\n\nconst Habits: FunctionComponent = () => {\n  const habitIds = useHabitIds();\n\n  const { habitViewType, toggleHabitViewType } = useToggleHabitViewType()\n\n  return (\n    <>\n      <button onClick={toggleHabitViewType}>toggle habit view</button>\n      {habitIds.length > 0 && (\n        <Flipper flipKey={habitIds.join('')}>\n          <div className={habitViewType === HABIT_VIEW_TYPE.week ? weekHabitContainerStyles : habitContainerStyles}>\n            {habitIds.map((habitId: string, idx: number) => {\n              return (\n                <Flipped key={habitId} flipId={habitId}>\n                  {/* <Flipped/> needs a div child */}\n                  <div>\n                    <Habit habitId={habitId} order={idx} habitViewType={habitViewType} />\n                  </div>\n                </Flipped>\n              );\n            })}\n          </div>\n        </Flipper>\n      )}\n    </>\n  );\n};\n\nexport default Habits;\n","import React from 'react';\nimport { Typography } from '@material-ui/core';\n\nfunction LandingPage() {\n  return (\n    <div>\n      <Typography variant=\"h1\">Habit Tracker</Typography>\n      <Typography variant=\"h4\">A Simple Habit Tracker App</Typography>\n      <Typography variant=\"h5\">Login To Begin</Typography>\n    </div>\n  );\n}\n\nexport default LandingPage;\n","import React from 'react';\nimport NavBar from 'ui/atoms/navigation/NavBar';\nimport SignIn from 'ui/pages/session/SignIn';\nimport SignUp from 'ui/pages/session/SignUp';\nimport ProfilePage from 'ui/pages/ProfilePage';\nimport useAuthPersistence from 'hooks/useAuthPersistence';\nimport { Switch, Route } from 'react-router-dom';\nimport './App.css';\nimport AuthRoute from 'ui/atoms/route/AuthRoute';\nimport UnAuthRoute from 'ui/atoms/route/UnAuthRoute';\nimport { css } from 'emotion';\nimport useLoggedIn from 'hooks/useLoggedIn';\nimport Habits from 'ui/molecules/habits/Habits';\nimport LandingPage from 'ui/pages/LandingPage';\n\nconst appStyles = css`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n\nfunction App() {\n  useAuthPersistence();\n  const isLoggedIn = useLoggedIn();\n  return (\n    <>\n      <NavBar />\n      <div>\n        <Switch>\n          <UnAuthRoute path=\"/signin\">\n            <SignIn />\n          </UnAuthRoute>\n          <UnAuthRoute path=\"/signup\">\n            <SignUp />\n          </UnAuthRoute>\n          <UnAuthRoute path=\"/passwordreset\">\n            <div>WIP</div>\n          </UnAuthRoute>\n          <AuthRoute path=\"/profile\">\n            <ProfilePage />\n          </AuthRoute>\n          <AuthRoute path=\"/notes\">\n            <ProfilePage />\n          </AuthRoute>\n          <Route path=\"/\">\n            <div className={appStyles}>{isLoggedIn ? <Habits /> : <LandingPage />}</div>\n          </Route>\n        </Switch>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n","import firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_FIREBASE_DB_URL,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore();\n","import { auth } from '../firebase';\n\nasync function loginUser({ email, password }) {\n  return await auth.signInWithEmailAndPassword(email, password);\n}\n\nexport default loginUser;\n","import { put, call } from 'redux-saga/effects';\nimport sessionSlice from 'redux-modules/session/sessionSlice';\nimport loginUser from 'firebase/users/loginUser';\nimport { push } from 'connected-react-router';\n\nfunction* loginSaga(action) {\n  const { email, password } = action.payload;\n  try {\n    yield put(sessionSlice.routines.login.request());\n\n    const { user } = yield call(loginUser, { email, password });\n\n    yield put(\n      sessionSlice.routines.login.success({\n        user,\n      })\n    );\n    yield put(push('/'));\n  } catch (e) {\n    console.error(e);\n    yield put(sessionSlice.routines.login.failure(e));\n  } finally {\n    yield put(sessionSlice.routines.login.fulfill());\n  }\n}\n\nexport default loginSaga;\n","import { firestore, auth } from '../firebase';\n\nasync function generateUserDocument(user) {\n  if (!user) throw new Error('User does not exist');\n\n  const userRef = firestore.doc(`users/${user.uid}`);\n  const snapshot = await userRef.get();\n\n  if (!snapshot.exists) {\n    const newUserInfo = {\n      habitIds: [],\n    };\n\n    await userRef.set(newUserInfo);\n\n    return newUserInfo;\n  }\n}\n\nasync function createUser({ email, password, displayName }) {\n  const { user } = await auth.createUserWithEmailAndPassword(email, password);\n\n  user.updateProfile({\n    displayName,\n  });\n\n  generateUserDocument(user);\n\n  return user;\n}\n\nexport default createUser;\n","import { put, call } from 'redux-saga/effects';\nimport sessionSlice from 'redux-modules/session/sessionSlice';\nimport createUser from 'firebase/users/createUser';\nimport { push } from 'connected-react-router';\n\nfunction* createUserSaga(action) {\n  const { displayName, email, password } = action.payload;\n\n  try {\n    yield put(sessionSlice.routines.createUser.request());\n\n    const user = yield call(createUser, { email, password, displayName });\n\n    yield put(\n      sessionSlice.routines.createUser.success({\n        user,\n      })\n    );\n\n    yield put(push('/'));\n  } catch (e) {\n    console.error(e);\n    yield put(sessionSlice.routines.createUser.failure(e));\n  } finally {\n    yield put(sessionSlice.routines.createUser.fulfill());\n  }\n}\n\nexport default createUserSaga;\n","import { auth } from '../firebase';\n\nfunction logoutUser() {\n  return auth.signOut();\n}\n\nexport default logoutUser;\n","import { put, call } from 'redux-saga/effects';\nimport sessionSlice from 'redux-modules/session/sessionSlice';\nimport logoutUser from 'firebase/users/logoutUser';\n\nfunction* logoutSaga() {\n  try {\n    yield put(sessionSlice.routines.logout.request());\n\n    yield call(logoutUser);\n    yield put(sessionSlice.routines.logout.success());\n  } catch (e) {\n    console.error(e);\n    yield put(sessionSlice.routines.logout.failure(e));\n  } finally {\n    yield put(sessionSlice.routines.logout.fulfill());\n  }\n}\n\nexport default logoutSaga;\n","import { createSelector } from '@reduxjs/toolkit';\nimport get from 'lodash/get';\nimport sessionSliceSelector from './sessionSliceSelector';\n\nconst currentUserIdSelector = createSelector(sessionSliceSelector, (session) => {\n  return get(session, 'user.uid', undefined);\n});\n\nexport default currentUserIdSelector;\n","import { call, cancel, cancelled, fork, put, select, take, takeLatest } from 'redux-saga/effects';\nimport { eventChannel } from 'redux-saga';\nimport { firestore } from '../../../firebase/firebase';\nimport currentUserIdSelector from '../selectors/currentUserIdSelector';\nimport sessionSlice from '../sessionSlice';\n\nfunction subscriptionChannel({ userId }) {\n  return eventChannel((emitter) => {\n    const userSettingsRef = firestore.doc(`users/${userId}`);\n\n    const unsubscribe = userSettingsRef.onSnapshot((querySnapshot) => {\n      emitter({\n        data: querySnapshot.data(),\n        userId,\n      });\n    });\n\n    return unsubscribe;\n  });\n}\n\nexport function* listen() {\n  const currentUserId = yield select(currentUserIdSelector);\n\n  const channel = yield call(subscriptionChannel, { userId: currentUserId });\n\n  try {\n    while (true) {\n      const { data } = yield take(channel);\n\n      yield put(sessionSlice.actions.setUserSettings({ userSettings: data }));\n    }\n  } finally {\n    if (yield cancelled()) channel.close();\n  }\n}\n\nexport function* handleSubscribe(action) {\n  const listenTask = yield fork(listen, action);\n\n  const unsubscribed = yield take(sessionSlice.routines.logout.SUCCESS);\n\n  if (unsubscribed.type === sessionSlice.routines.logout.SUCCESS) {\n    yield cancel(listenTask);\n  }\n}\n\nexport function* subscribeToUserSettingsSaga() {\n  yield takeLatest(\n    [\n      sessionSlice.actions.setCurrentUser,\n      sessionSlice.routines.login.SUCCESS,\n      sessionSlice.routines.createUser.SUCCESS,\n    ],\n    handleSubscribe\n  );\n}\n","import { firestore } from '../firebase';\n\nasync function updateHabitViewType({ userId, habitViewType }) {\n  const userSettingsRef = firestore.collection('users').doc(userId);\n\n  await firestore.runTransaction(async (transaction) => {\n    const userSettingsDoc = await transaction.get(userSettingsRef);\n    const userSettings = userSettingsDoc.data();\n\n    transaction.update(userSettingsRef, { habitIds: userSettings.habitIds, habitViewType });\n  });\n\n  return userId\n}\n\nexport default updateHabitViewType;\n","import { put, call, select } from 'redux-saga/effects';\nimport currentUserIdSelector from 'redux-modules/session/selectors/currentUserIdSelector';\nimport sessionSlice from 'redux-modules/session/sessionSlice';\nimport updateHabitViewType from 'firebase/users/updateHabitViewType';\n\nfunction* updateHabitViewTypeSaga(action) {\n  const { habitViewType } = action.payload;\n  const currentUserId = yield select(currentUserIdSelector);\n\n  try {\n    yield put(sessionSlice.routines.updateHabitViewType.request());\n\n    const userId = yield call(updateHabitViewType, { userId: currentUserId, habitViewType });\n\n    yield put(\n      sessionSlice.routines.updateHabitViewType.success({\n        userId, habitViewType\n      })\n    );\n\n  } catch (e) {\n    console.error(e);\n    yield put(sessionSlice.routines.updateHabitViewType.failure(e));\n  } finally {\n    yield put(sessionSlice.routines.updateHabitViewType.fulfill());\n  }\n}\n\nexport default updateHabitViewTypeSaga;\n","import { fork, takeEvery } from 'redux-saga/effects';\nimport sessionSlice from 'redux-modules/session/sessionSlice';\nimport loginSaga from './loginSaga';\nimport createUserSaga from './createUserSaga';\nimport logoutSaga from './logoutSaga';\nimport { subscribeToUserSettingsSaga } from './subcribeToUserSettingsSaga';\nimport updateHabitViewTypeSaga from './updateHabitViewTypeSaga';\n\nfunction* sessionSagas() {\n  yield takeEvery(sessionSlice.routines.login.TRIGGER, loginSaga);\n  yield takeEvery(sessionSlice.routines.logout.TRIGGER, logoutSaga);\n  yield takeEvery(sessionSlice.routines.createUser.TRIGGER, createUserSaga);\n  yield takeEvery(sessionSlice.routines.updateHabitViewType.TRIGGER, updateHabitViewTypeSaga);\n  yield fork(subscribeToUserSettingsSaga);\n}\n\nexport default sessionSagas;\n","import { firestore } from '../firebase';\n\nasync function createHabit({ userId, habitName, options = {} }) {\n  const userSettingsRef = firestore.collection('users').doc(userId);\n\n  const habitRef = firestore.collection('habits').doc();\n  const habitId = habitRef.id;\n\n  await firestore.runTransaction(async (transaction) => {\n    const userSettingsDoc = await transaction.get(userSettingsRef);\n    const userSettings = userSettingsDoc.data();\n\n    transaction.set(habitRef, { name: habitName, userId, archived: false, ...options });\n\n    transaction.update(userSettingsRef, { ...userSettings, habitIds: [...userSettings.habitIds, habitId] });\n  });\n\n  return [habitId, (await firestore.collection('habits').doc(habitId).get()).data()];\n}\n\nexport default createHabit;\n","import { call, put, select } from 'redux-saga/effects';\nimport habitsSlice from 'redux-modules/habits/habitsSlice';\nimport currentUserIdSelector from 'redux-modules/session/selectors/currentUserIdSelector';\nimport createHabit from 'firebase/habits/createHabit';\n\nfunction* createHabitSaga(action) {\n  const { habitName, options = {} } = action.payload;\n  const currentUserId = yield select(currentUserIdSelector);\n\n  try {\n    yield put(habitsSlice.routines.createHabit.request());\n    const [habitId, newHabit] = yield call(createHabit, {\n      userId: currentUserId,\n      habitName,\n      options,\n    });\n\n    yield put(habitsSlice.routines.createHabit.success({ habit: newHabit, id: habitId }));\n  } catch (e) {\n    console.error(e);\n    yield put(habitsSlice.routines.createHabit.failure(e));\n  } finally {\n    yield put(habitsSlice.routines.createHabit.fulfill());\n  }\n}\n\nexport default createHabitSaga;\n","import { firestore } from '../firebase';\n\nasync function updateHabit({ id, habit }) {\n  const habitRef = firestore.collection('habits').doc(id);\n\n  const newData = {\n    ...habit,\n  };\n\n  return await habitRef.set(newData, { merge: true });\n}\n\nexport default updateHabit;\n","import { call, put } from 'redux-saga/effects';\nimport habitsSlice from 'redux-modules/habits/habitsSlice';\nimport updateHabit from 'firebase/habits/updateHabit';\n\nfunction* updateHabitSaga(action) {\n  const { id, habit } = action.payload;\n\n  try {\n    yield put(habitsSlice.routines.updateHabit.request());\n    yield call(updateHabit, {\n      id,\n      habit,\n    });\n\n    yield put(habitsSlice.routines.updateHabit.success({ id, updatedHabitProperties: habit }));\n  } catch (e) {\n    console.error(e);\n    yield put(habitsSlice.routines.updateHabit.failure(e));\n  } finally {\n    yield put(habitsSlice.routines.updateHabit.fulfill());\n  }\n}\n\nexport default updateHabitSaga;\n","import { firestore } from '../firebase';\n\nasync function updateHistory({ year, month, day, habitId, newValue }) {\n  const habitRef = firestore.collection('habits').doc(habitId);\n\n  const newData = {\n    history: {\n      [year]: {\n        [month]: {\n          [day]: newValue,\n        },\n      },\n    },\n  };\n\n  return await habitRef.set(newData, { merge: true });\n}\n\nexport default updateHistory;\n","import { call, put, select } from 'redux-saga/effects';\nimport get from 'lodash/get';\nimport habitsSlice from 'redux-modules/habits/habitsSlice';\nimport updateHistory from 'firebase/habits/updateHistory';\nimport habitSelector from '../selectors/habitSelector';\n\nfunction* updateHistorySaga(action) {\n  const { day, month, year, habitId } = action.payload;\n\n  try {\n    yield put(habitsSlice.routines.updateHistory.request());\n    const habit = yield select(habitSelector(habitId));\n\n    const { history = {} } = habit;\n\n    const currentValue = get(history, [year, month, day], false);\n\n    yield call(updateHistory, { year, month, day, habitId, newValue: !currentValue });\n\n    yield put(habitsSlice.routines.updateHistory.success());\n  } catch (e) {\n    console.error(e);\n    yield put(habitsSlice.routines.updateHistory.failure(e));\n  } finally {\n    yield put(habitsSlice.routines.updateHistory.fulfill());\n  }\n}\n\nexport default updateHistorySaga;\n","import { call, cancel, cancelled, fork, put, select, take, takeLatest } from 'redux-saga/effects';\nimport { eventChannel } from 'redux-saga';\nimport { firestore } from '../../../firebase/firebase';\nimport habitsSlice from '../habitsSlice';\nimport sessionSlice from 'redux-modules/session/sessionSlice';\nimport currentUserIdSelector from 'redux-modules/session/selectors/currentUserIdSelector';\n\nfunction subscriptionChannel({ userId }) {\n  return eventChannel((emitter) => {\n    const habitsRef = firestore\n      .collection('habits')\n      .where('userId', '==', userId)\n      .where('archived', '==', false);\n\n    const unsubscribe = habitsRef.onSnapshot((querySnapshot) => {\n      querySnapshot.docChanges().forEach((change) => {\n        emitter({\n          type: change.type,\n          data: change.doc.data(),\n          id: change.doc.id,\n        });\n      });\n    });\n\n    return unsubscribe;\n  });\n}\n\nexport function* listen(action) {\n  const currentUserId = yield select(currentUserIdSelector);\n\n  const channel = yield call(subscriptionChannel, { userId: currentUserId });\n\n  try {\n    while (true) {\n      const { data: habit, id, type } = yield take(channel);\n\n      switch (type) {\n        case 'added': {\n          yield put(habitsSlice.actions.addHabit({ habit, id }));\n          break;\n        }\n        case 'modified': {\n          yield put(habitsSlice.actions.updateHabit({ habit, id }));\n          break;\n        }\n        case 'removed': {\n          yield put(habitsSlice.actions.deleteHabit({ habit, id }));\n          break;\n        }\n        default:\n          break;\n      }\n    }\n  } finally {\n    if (yield cancelled()) channel.close();\n  }\n}\n\nexport function* handleSubscribe(action) {\n  const listenTask = yield fork(listen, action);\n  const unsubscribed = yield take(sessionSlice.routines.logout.SUCCESS);\n\n  if (unsubscribed.type === sessionSlice.routines.logout.SUCCESS) {\n    yield cancel(listenTask);\n  }\n}\n\nfunction* subscribeToHabitsSaga() {\n  yield takeLatest(\n    [\n      sessionSlice.actions.setCurrentUser,\n      sessionSlice.routines.login.SUCCESS,\n      sessionSlice.routines.createUser.SUCCESS,\n    ],\n    handleSubscribe\n  );\n}\n\nexport default subscribeToHabitsSaga;\n","import { firestore } from '../firebase';\n\nasync function deleteHabit({ userId, habitId }) {\n  const userSettingsRef = firestore.collection('users').doc(userId);\n  const habitRef = firestore.collection('habits').doc(habitId);\n\n  return await firestore.runTransaction(async (transaction) => {\n    const userSettingsDoc = await transaction.get(userSettingsRef);\n    const userSettings = userSettingsDoc.data();\n\n    transaction.delete(habitRef);\n\n    const newHabitIds = userSettings.habitIds.filter((id) => id !== habitId);\n\n    transaction.update(userSettingsRef, { habitIds: newHabitIds });\n  });\n}\n\nexport default deleteHabit;\n","import { call, put, select } from 'redux-saga/effects';\nimport habitsSlice from 'redux-modules/habits/habitsSlice';\nimport currentUserIdSelector from 'redux-modules/session/selectors/currentUserIdSelector';\nimport deleteHabit from 'firebase/habits/deleteHabit';\n\nfunction* deleteHabitSaga(action) {\n  const { habitId } = action.payload;\n  const currentUserId = yield select(currentUserIdSelector);\n\n  try {\n    yield put(habitsSlice.routines.deleteHabit.request());\n\n    yield call(deleteHabit, {\n      userId: currentUserId,\n      habitId,\n    });\n\n    yield put(habitsSlice.routines.deleteHabit.success({ id: habitId }));\n  } catch (e) {\n    console.error(e);\n    yield put(habitsSlice.routines.deleteHabit.failure(e));\n  } finally {\n    yield put(habitsSlice.routines.deleteHabit.fulfill());\n  }\n}\n\nexport default deleteHabitSaga;\n","import { firestore } from '../firebase';\n\nasync function swapHabitOrder({\n  userId,\n  firstHabitId,\n  secondHabitId,\n}: {\n  userId: string;\n  firstHabitId: string;\n  secondHabitId: string;\n}) {\n  const userSettingsRef = firestore.collection('users').doc(userId);\n\n  return await firestore.runTransaction(async (transaction) => {\n    const userSettingsDoc = await transaction.get(userSettingsRef);\n    const userSettings = userSettingsDoc.data();\n\n    if (\n      !userSettings ||\n      !userSettings.habitIds.includes(firstHabitId) ||\n      !userSettings.habitIds.includes(secondHabitId)\n    ) {\n      throw new Error('habit does not exist, cannot move the habit');\n    }\n\n    const newHabitIds = [...userSettings.habitIds];\n    const firstHabitIdx = newHabitIds.indexOf(firstHabitId);\n    const secondHabitIdx = newHabitIds.indexOf(secondHabitId);\n\n    // swap IDs in arr\n    newHabitIds[firstHabitIdx] = secondHabitId;\n    newHabitIds[secondHabitIdx] = firstHabitId;\n\n    await transaction.update(userSettingsRef, { habitIds: newHabitIds });\n\n    return newHabitIds;\n  });\n}\n\nexport default swapHabitOrder;\n","import { call, put, select } from 'redux-saga/effects';\nimport habitsSlice from 'redux-modules/habits/habitsSlice';\nimport currentUserIdSelector from 'redux-modules/session/selectors/currentUserIdSelector';\nimport swapHabitOrder from 'firebase/habits/swapHabitOrder';\n\nfunction* swapHabitOrderSaga(action) {\n  const { firstHabitId, secondHabitId } = action.payload;\n  const currentUserId = yield select(currentUserIdSelector);\n\n  try {\n    yield put(habitsSlice.routines.swapHabit.request());\n    const habitIds = yield call(swapHabitOrder, {\n      userId: currentUserId,\n      firstHabitId,\n      secondHabitId,\n    });\n\n    yield put(habitsSlice.routines.swapHabit.success({ habitIds }));\n  } catch (e) {\n    console.error(e);\n    yield put(habitsSlice.routines.swapHabit.failure(e));\n  } finally {\n    yield put(habitsSlice.routines.swapHabit.fulfill());\n  }\n}\n\nexport default swapHabitOrderSaga;\n","import { firestore } from \"../firebase\";\n\nfunction move(arr: string[], id: string, newPosition: number) {\n  const oldPosition = arr.indexOf(id);\n\n  if (oldPosition === -1) {\n    console.error(`Error: Element with ID \"${id}\" not found in the array.`);\n    return null;\n  }\n\n  if (oldPosition === newPosition) {\n    return [...arr];\n  }\n\n  const newArr = [...arr];\n  const [elementToMove] = newArr.splice(oldPosition, 1);\n  const targetPosition = Math.min(Math.max(0, newPosition), newArr.length);\n\n  newArr.splice(targetPosition, 0, elementToMove);\n  return newArr;\n}\n\nasync function reorderHabit({\n  userId,\n  habitId,\n  newPosition,\n}: {\n  userId: string;\n  habitId: string;\n  newPosition: number;\n}) {\n  const userSettingsRef = firestore.collection(\"users\").doc(userId);\n\n  return await firestore.runTransaction(async (transaction) => {\n    const userSettingsDoc = await transaction.get(userSettingsRef);\n    const userSettings = userSettingsDoc.data();\n\n    if (!userSettings || !userSettings.habitIds.includes(habitId)) {\n      throw new Error(\"habit does not exist, cannot move the habit\");\n    }\n\n    const newHabitIds = [...userSettings.habitIds];\n\n    if (!newHabitIds[newPosition]) {\n      throw new Error(\"habit position does not exist, cannot move the habit\");\n    }\n\n    const result = move(newHabitIds, habitId, newPosition);\n\n    await transaction.update(userSettingsRef, { habitIds: result });\n\n    return newHabitIds;\n  });\n}\n\nexport default reorderHabit;\n","import { call, put, select } from \"redux-saga/effects\";\nimport habitsSlice from \"redux-modules/habits/habitsSlice\";\nimport currentUserIdSelector from \"redux-modules/session/selectors/currentUserIdSelector\";\nimport reorderHabit from \"firebase/habits/reorderHabit\";\n\nfunction* reorderHabitSaga(action) {\n  const { habitId, newPosition } = action.payload;\n  const currentUserId = yield select(currentUserIdSelector);\n\n  try {\n    yield put(habitsSlice.routines.reorderHabit.request());\n    const habitIds = yield call(reorderHabit, {\n      userId: currentUserId,\n      habitId,\n      newPosition,\n    });\n\n    yield put(habitsSlice.routines.reorderHabit.success({ habitIds }));\n  } catch (e) {\n    console.error(e);\n    yield put(habitsSlice.routines.reorderHabit.failure(e));\n  } finally {\n    yield put(habitsSlice.routines.reorderHabit.fulfill());\n  }\n}\n\nexport default reorderHabitSaga;\n","import { takeEvery, fork } from \"redux-saga/effects\";\nimport habitsSlice from \"redux-modules/habits/habitsSlice\";\nimport createHabitSaga from \"./createHabitSaga\";\nimport updateHabitSaga from \"./updateHabitSaga\";\nimport updateHistorySaga from \"./updateHistorySaga\";\nimport subscribeToHabitsSaga from \"./subcribeToHabitsSaga\";\nimport deleteHabitSaga from \"./deleteHabitSaga\";\nimport swapHabitOrderSaga from \"./swapHabitOrderSaga\";\nimport reorderHabitSaga from \"./reorderHabitSaga\";\n\nfunction* habitSagas() {\n  yield takeEvery(habitsSlice.routines.createHabit.TRIGGER, createHabitSaga);\n  yield takeEvery(habitsSlice.routines.updateHabit.TRIGGER, updateHabitSaga);\n  yield takeEvery(\n    habitsSlice.routines.updateHistory.TRIGGER,\n    updateHistorySaga,\n  );\n  yield takeEvery(habitsSlice.routines.deleteHabit.TRIGGER, deleteHabitSaga);\n  yield takeEvery(habitsSlice.routines.swapHabit.TRIGGER, swapHabitOrderSaga);\n  yield takeEvery(habitsSlice.routines.reorderHabit.TRIGGER, reorderHabitSaga);\n  yield fork(subscribeToHabitsSaga);\n}\n\nexport default habitSagas;\n","import { all, call, spawn } from 'redux-saga/effects';\nimport sessionsSaga from './session/sagas/sessionSagas';\nimport habitSagas from './habits/sagas/habitSagas';\nimport { routinePromiseWatcherSaga } from 'redux-saga-routines';\n\nfunction* rootSaga() {\n  const sagas = [sessionsSaga, habitSagas, routinePromiseWatcherSaga];\n\n  yield all(\n    sagas.map((saga) =>\n      spawn(function* allSagas() {\n        while (true) {\n          try {\n            yield call(saga);\n            break;\n          } catch (e) {\n            console.error(e);\n          }\n        }\n      })\n    )\n  );\n}\n\nexport default rootSaga;\n","import { configureStore } from '@reduxjs/toolkit';\nimport { connectRouter, routerMiddleware } from 'connected-react-router';\nimport createSagaMiddleware from 'redux-saga';\nimport rootSaga from './rootSaga';\nimport sessionSlice from './session/sessionSlice';\nimport habitsSlice from './habits/habitsSlice';\n\nconst createStore = ({ initialState = {}, history }) => {\n  const sagaMiddleware = createSagaMiddleware();\n  const middleware = [sagaMiddleware, routerMiddleware(history)];\n\n  const store = configureStore({\n    reducer: {\n      session: sessionSlice.reducer,\n      habits: habitsSlice.reducer,\n      router: connectRouter(history),\n    },\n    middleware,\n    preloadedState: initialState,\n  });\n\n  sagaMiddleware.run(rootSaga);\n\n  return store;\n};\n\nexport default createStore;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.0/8 are considered localhost for IPv4.\n  window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n            'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport createStore from 'redux-modules/store';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport HTML5toTouch from 'react-dnd-multi-backend/dist/esm/HTML5toTouch';\nimport ThemeProvider from 'ui/atoms/themeProvider/ThemeProvider';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport { createHashHistory } from 'history';\nimport { ConnectedRouter } from 'connected-react-router';\nimport { DndProvider } from 'react-dnd-multi-backend';\nimport { Provider } from 'react-redux';\n\nconst history = createHashHistory();\n\nfunction initApp() {\n  const store = createStore({ history });\n  return ReactDOM.render(\n    <React.StrictMode>\n      <Provider store={store}>\n        <DndProvider options={HTML5toTouch}>\n          <ConnectedRouter history={history}>\n            <ThemeProvider>\n              <CssBaseline />\n              <App />\n            </ThemeProvider>\n          </ConnectedRouter>\n        </DndProvider>\n      </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n  );\n}\n\ndocument.addEventListener('DOMContentLoaded', initApp);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorkerRegistration.register();\n"],"sourceRoot":""}